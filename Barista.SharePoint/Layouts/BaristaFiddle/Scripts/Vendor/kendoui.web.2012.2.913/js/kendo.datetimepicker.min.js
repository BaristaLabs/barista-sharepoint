/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function K(a){var b=c.getCulture(a.culture).calendars.standard.patterns;a.format=g(a.format||b.g),a.timeFormat=g(a.timeFormat||b.t),c.DateView.normalize(a),a.parseFormats.splice(1,0,a.timeFormat)}function J(a){a.preventDefault()}var c=window.kendo,d=c.TimeView,e=c.support.touch,f=c.parseDate,g=c._extractFormat,h=c.calendar,i=h.isInRange,j=h.restrictValue,k=h.isEqualDatePart,l=d.getMilliseconds,m=c.ui,n=m.Widget,o="open",p="close",q="change",r=".kendoDateTimePicker",s=(e?"touchend":"click")+r,t="disabled",u="k-state-default",v="k-state-focused",w="k-state-hover",x="k-state-disabled",y="mouseenter"+r+" mouseleave"+r,z=(e?"touchstart":"mousedown")+r,A="month",B="<span/>",C=Date,D=new C(1900,0,1),E=new C(2099,11,31),F={view:"date"},G={view:"time"},H=a.extend,I=n.extend({init:function(b,d){var e=this;n.fn.init.call(e,b,d),b=e.element,d=e.options,K(d),e._wrapper(),e._icons(),e._views(),e._reset(),b[0].type="text",b.addClass("k-input").on("keydown"+r,a.proxy(e._keydown,e)).on("focus"+r,function(){e._inputWrapper.addClass(v)}).on("blur"+r,function(){e._inputWrapper.removeClass(v),e._change(b.val()),e.close("date"),e.close("time")}),e._midnight=l(d.min)+l(d.max)===0,e.enable(!b.is("[disabled]")),e.value(d.value||b.val()),c.notify(e)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new C(D),max:new C(E),interval:30,height:200,footer:"",start:A,depth:A,animation:{},month:{}},events:[o,p,q],setOptions:function(a){var b=this,c=b.dateView.options,d=b.timeView.options;n.fn.setOptions.call(b,a),K(b.options),a=b.options,H(c,a,{change:c.change,close:c.close,open:c.open}),H(d,a,{format:a.timeFormat,change:d.change,close:d.close,open:d.open}),b.timeView.ul[0].innerHTML=""},enable:function(a){var b=this,c=b.element,d=b._dateIcon.off(r),f=b._timeIcon.off(r),g=b._inputWrapper.off(y);a===!1?(g.removeClass(u).addClass(x),c.attr(t,t)):(g.addClass(u).removeClass(x).on(y,b._toggleHover),c.removeAttr(t),d.on(z,J).on(s,function(){b.toggle("date"),!e&&c[0]!==document.activeElement&&c.focus()}),f.on(z,J).on(s,function(){b.toggle("time"),!e&&c[0]!==document.activeElement&&c.focus()}))},destroy:function(){var a=this;n.fn.destroy.call(a),a.dateView.destroy(),a.timeView.destroy(),a.element.off(r),a._dateIcon.off(r),a._timeIcon.off(r),a._inputWrapper.off(r),a._form&&a._form.off("reset",a._resetHandler)},close:function(a){a!=="time"&&(a="date"),this[a+"View"].close()},open:function(a){a!=="time"&&(a="date"),this[a+"View"].open()},min:function(a){return this._option("min",a)},max:function(a){return this._option("max",a)},toggle:function(a){var b="timeView";a!=="time"?a="date":b="dateView",this[a+"View"].toggle(),this[b].close()},value:function(a){var c=this;if(a===b)return c._value;c._old=c._update(a)},_change:function(a){var b=this;a=b._update(a),+b._old!=+a&&(b._old=a,b.trigger(q),b.element.trigger(q))},_option:function(a,c){var d=this,e=d.options,g=d.timeView,h=g.options,i=d._value||d._old;if(c===b)return e[a];c=f(c,e.parseFormats,e.culture);if(!!c){e[a]=new C(c),d.dateView[a](c),d._midnight=l(e.min)+l(e.max)===0;if(i&&k(c,i)){if(d._midnight&&a=="max"){h[a]=E,g.dataBind([E]);return}h[a]=c}else h.max=E,h.min=D;g.bind()}},_toggleHover:function(b){e||a(b.currentTarget).toggleClass(w,b.type==="mouseenter")},_update:function(a){var b=this,d=b.options,e=d.min,g=d.max,h=b.timeView,l=f(a,d.parseFormats,d.culture),m,n,o,p,q;if(+l===+b._value){q=c.toString(l,d.format,d.culture),q!==a&&b.element.val(l===null?a:q);return l}l!==null&&k(l,e)?l=j(l,e,g):i(l,e,g)||(l=null),b._value=l,h.value(l),b.dateView.value(l),l&&(o=b._old,n=h.options,k(l,e)&&(n.min=e,n.max=E,m=!0),k(l,g)&&(b._midnight?(h.dataBind([E]),p=!0):(n.max=g,m||(n.min=D),m=!0)),!p&&(!o&&m||o&&!k(o,l))&&(m||(n.max=E,n.min=D),h.bind())),b.element.val(l?c.toString(l,d.format,d.culture):a);return l},_keydown:function(a){var b=this,d=b.dateView,e=b.timeView,f=d.popup.visible();a.altKey&&a.keyCode===c.keys.DOWN?b.toggle(f?"time":"date"):f?d.move(a):e.popup.visible()?e.move(a):a.keyCode===c.keys.ENTER&&b._change(b.element.val())},_views:function(){var a=this,b=a.options;a.dateView=new c.DateView(H({},b,{anchor:a.wrapper,change:function(){var c=a.dateView.calendar.value(),d=+c,e=+b.min,f=+b.max,g;if(d===e||d===f)g=new C(a._value),g.setFullYear(c.getFullYear()),g.setMonth(c.getMonth()),g.setDate(c.getDate()),i(g,e,f)&&(c=g);a._change(c),a.close("date")},close:function(b){a.trigger(p,F)&&b.preventDefault()},open:function(b){a.trigger(o,F)&&b.preventDefault()}})),a.timeView=new d({anchor:a.wrapper,animation:b.animation,dates:b.dates,format:b.timeFormat,culture:b.culture,height:b.height,interval:b.interval,min:new C(D),max:new C(E),parseFormats:b.parseFormats,value:b.value,change:function(d,e){d=a.timeView._parse(d),d<b.min?(d=new C(b.min),a.timeView.options.min=d):d>b.max&&(d=new C(b.max),a.timeView.options.max=d),e?(a._timeSelected=!0,a._change(d)):a.element.val(c.toString(d,b.format,b.culture))},close:function(b){a.trigger(p,G)&&b.preventDefault()},open:function(b){a.trigger(o,G)&&b.preventDefault()}})},_icons:function(){var b=this,c=b.element,d;d=c.next("span.k-select"),d[0]||(d=a('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(c),d=d.children()),b._dateIcon=d.eq(0),b._timeIcon=d.eq(1)},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-datetimepicker"),d[0]||(d=c.wrap(B).parent().addClass("k-picker-wrap k-state-default"),d=d.wrap(B).parent()),d[0].style.cssText=c[0].style.cssText,c.css({width:"100%",height:c[0].style.height}),b.wrapper=d.addClass("k-widget k-datetimepicker k-header").addClass(c[0].className).show(),b._inputWrapper=a(d[0].firstChild)},_reset:function(){var a=this,b=a.element,c=b.closest("form");c[0]&&(a._resetHandler=function(){a.value(b[0].defaultValue)},a._form=c.on("reset",a._resetHandler))}});m.plugin(I)})(jQuery);