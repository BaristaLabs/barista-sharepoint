/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function Q(b){b=a(b),b.filter(".k-first:not(:first-child)").removeClass(u),b.filter(".k-last:not(:last-child)").removeClass(q),b.filter(":first-child").addClass(u),b.filter(":last-child").addClass(q)}function P(b){b=a(b),b.find(".k-icon").remove(),b.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var b=a(this),c=b.parent().parent();b.append("<span class='k-icon "+(c.hasClass(o+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function O(b){b=a(b),b.addClass("k-item").children(m).addClass(v),b.children("a").addClass(p).children(m).addClass(v),b.filter(":not([disabled])").addClass(B),b.filter(".k-separator:empty").append("&nbsp;"),b.filter("li[disabled]").addClass(C).removeAttr("disabled"),b.children("a").filter(":focus").parent().addClass("k-state-active"),b.children("."+p).length||b.contents().filter(function(){return!this.nodeName.match(k)&&(this.nodeType!=3||!!a.trim(this.nodeValue))}).wrapAll("<span class='"+p+"'/>"),P(b),Q(b)}function N(b,c){try{return a.contains(b,c)}catch(d){return!1}}function M(a,b){a=a.split(" ")[!b+0]||a;var d={origin:["bottom","left"],position:["top","left"]},e=/left|right/.test(a);e?(d.origin=["top",a],d.position[1]=c.directions[a].reverse):(d.origin[0]=a,d.position[0]=c.directions[a].reverse),d.origin=d.origin.join(" "),d.position=d.position.join(" ");return d}function L(a,b){a=a.split(" ")[!b+0]||a;return a.replace("top","up").replace("bottom","down")}var c=window.kendo,d=c.ui,e=c.support.touch,f=a.extend,g=a.proxy,h=a.each,i=c.template,j=d.Widget,k=/^(ul|a|div)$/i,l=".kendoMenu",m="img",n="open",o="k-menu",p="k-link",q="k-last",r="close",s=e?"touchend":"click",t="timer",u="k-first",v="k-image",w="select",x="zIndex",y="mouseenter",z="mouseleave",A="kendoPopup",B="k-state-default",C="k-state-disabled",D=".k-group",E=":not(.k-list) > .k-item",F=".k-item.k-state-disabled",G=".k-item:not(.k-state-disabled)",H=".k-item:not(.k-state-disabled) > .k-link",I="div:not(.k-animation-container,.k-list-container)",J={content:i("<div class='k-content k-group'>#= content(item) #</div>"),group:i("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:i("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:i("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } #</li>"),image:i("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:i("<span class='#= arrowClass(item, group) #'></span>"),sprite:i("<span class='k-sprite #= spriteCssClass #'></span>"),empty:i("")},K={wrapperCssClass:function(a,b){var c="k-item",d=b.index;b.enabled===!1?c+=" k-state-disabled":c+=" k-state-default",a.firstLevel&&d===0&&(c+=" k-first"),d==a.length-1&&(c+=" k-last");return c},textClass:function(a){return p},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a,b){var c="k-icon";b.horizontal?c+=" k-i-arrow-s":c+=" k-i-arrow-e";return c},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(a){return"k-group"},content:function(a){return a.content?a.content:"&nbsp;"}},R=j.extend({init:function(b,d){var f=this;j.fn.init.call(f,b,d),b=f.wrapper=f.element,d=f.options,d.dataSource&&(f.element.empty(),f.append(d.dataSource,b)),f._updateClasses(),d.animation===!1&&(d.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),f.nextItemZIndex=100,b.on(s+l,F,!1).on(s+l,G,g(f._click,f)),e?(d.openOnClick=!0,b.on("touchstart"+l+" touchend"+l,H,f._toggleHover)):b.on(y+l,G,g(f._mouseenter,f)).on(z+l,G,g(f._mouseleave,f)).on(y+l+" "+z+l,H,f._toggleHover),d.openOnClick&&(f.clicked=!1,f._documentClickHandler=g(f._documentClick,f),a(document).click(f._documentClickHandler)),c.notify(f)},events:[n,r,w],options:{name:"Menu",animation:{open:{duration:200,show:!0},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},destroy:function(){var b=this;j.fn.destroy.call(b),b.element.off(l),b._documentClickHandler&&a(document).unbind(b._documentClickHandler)},enable:function(a,b){this._toggleDisabled(a,b!==!1);return this},disable:function(a){this._toggleDisabled(a,!1);return this},append:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.length?c.find("> .k-group, .k-animation-container > .k-group"):null);h(d.items,function(b){d.group.append(this);var c=d.contents[b];c&&a(this).append(c),P(this)}),P(c),Q(d.group.find(".k-first, .k-last").add(d.items));return this},insertBefore:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.parent());h(d.items,function(b){c.before(this);var e=d.contents[b];e&&a(this).append(e),P(this),Q(this)}),Q(c);return this},insertAfter:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.parent());h(d.items,function(b){c.after(this);var e=d.contents[b];e&&a(this).append(e),P(this),Q(this)}),Q(c);return this},_insert:function(b,c,d){var e=this,g,h,i=[];if(!c||!c.length)d=e.element;var j=a.isPlainObject(b),k={firstLevel:d.hasClass(o),horizontal:d.hasClass(o+"-horizontal"),expanded:!0,length:d.children().length};c&&!d.length&&(d=a(R.renderGroup({group:k})).appendTo(c)),j||a.isArray(b)?(g=a.map(j?[b]:b,function(b,c){return typeof b=="string"?a(b):a(R.renderItem({group:k,item:f(b,{index:c})}))}),i=a.map(j?[b]:b,function(b,c){return b.content||b.contentUrl?a(R.renderContent({item:f(b,{index:c})})):!1})):(g=a(b),h=g.find("> ul").addClass("k-group"),g=g.filter("li"),g.add(h.find("> li")).each(function(){O(this)}));return{items:g,group:d,contents:i}},remove:function(a){a=this.element.find(a);var b=this,c=a.parentsUntil(b.element,E),d=a.parent("ul");a.remove();if(d&&!d.children(E).length){var e=d.parent(".k-animation-container");e.length?e.remove():d.remove()}c.length&&(c=c.eq(0),P(c),Q(c));return b},open:function(c){var d=this,e=d.options,g=e.orientation=="horizontal",h=e.direction;c=d.element.find(c),/^(top|bottom|default)$/.test(h)&&(h=g?(h+" right").replace("default","bottom"):"right"),c.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var b=a(this).data("kendoPopup");b&&b.close()}),c.each(function(){var c=a(this);clearTimeout(c.data(t)),c.data(t,setTimeout(function(){var a=c.find(".k-group:first:hidden"),i;if(a[0]&&d.trigger(n,{item:c[0]})===!1){c.data(x,c.css(x)),c.css(x,d.nextItemZIndex++),i=a.data(A);var j=c.parent().hasClass(o),k=j&&g,l=M(h,j),m=e.animation.open.effects,p=m!==b?m:"slideIn:"+L(h,j);i?(i=a.data(A),i.options.origin=l.origin,i.options.position=l.position,i.options.animation.open.effects=p):i=a.kendoPopup({origin:l.origin,position:l.position,collision:e.popupCollision!==b?e.popupCollision:k?"fit":"fit flip",anchor:c,appendTo:c,animation:{open:f(!0,{effects:p},e.animation.open),close:e.animation.close},close:function(a){var b=a.sender.wrapper.parent();d.trigger(r,{item:b[0]})===!1?(b.css(x,b.data(x)),b.removeData(x)):a.preventDefault()}}).data(A),i.open()}},d.options.hoverDelay))});return d},close:function(b){var c=this,d=c.element;b=d.find(b),b.length||(b=d.find(">.k-item")),b.each(function(){var b=a(this);clearTimeout(b.data(t)),b.data(t,setTimeout(function(){var a=b.find(".k-group:first:visible").data(A);a&&a.close()},c.options.hoverDelay))});return c},_toggleDisabled:function(b,c){this.element.find(b).each(function(){a(this).toggleClass(B,c).toggleClass(C,!c)})},_toggleHover:function(b){var d=a(c.eventTarget(b)).closest(E);d.parents("li."+C).length||d.toggleClass("k-state-hover",b.type==y||b.type=="touchstart")},_updateClasses:function(){var a=this.element,b;a.addClass("k-widget k-reset k-header "+o).addClass(o+"-"+this.options.orientation),a.find("li > ul").addClass("k-group"),b=a.find("> li,.k-group > li"),b.each(function(){O(this)})},_mouseenter:function(b){var c=this,d=a(b.currentTarget),e=d.children(".k-animation-container").length||d.children(D).length;b.delegateTarget==d.parents(".k-menu")[0]&&((!c.options.openOnClick||c.clicked)&&!N(b.currentTarget,b.relatedTarget)&&e&&c.open(d),c.options.openOnClick&&c.clicked&&d.siblings().each(g(function(a,b){c.close(b)},c)))},_mouseleave:function(b){var c=this,d=a(b.currentTarget),e=d.children(".k-animation-container").length||d.children(D).length;d.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?b.stopImmediatePropagation():!c.options.openOnClick&&!N(b.currentTarget,b.relatedTarget)&&e&&c.close(d)},_click:function(b){var d=this,f,h=d.options,i=a(c.eventTarget(b)),j=i.closest("."+p),k=i.closest(E),l=j.attr("href"),m,q,s=!!l&&l.charAt(l.length-1)!="#";if(!k.children(I)[0]){if(k.hasClass(C)){b.preventDefault();return}e&&k.siblings().each(g(function(a,b){d.close(b)},d)),!b.handled&&d.trigger(w,{item:k[0]})&&b.preventDefault(),b.handled=!0,m=k.children(D+",.k-animation-container"),q=m.is(":visible");if(h.closeOnClick&&!s&&(!m.length||h.openOnClick&&q)){d.close(j.parentsUntil(d.element,E)),d.clicked=!1;return}if((!k.parent().hasClass(o)||!h.openOnClick)&&!e)return;s||b.preventDefault(),d.clicked=!0,f=m.is(":visible")?r:n,d[f](k)}},_documentClick:function(a){N(this.element[0],a.target)||(this.clicked=!1)}});f(R,{renderItem:function(a){a=f({menu:{},group:{}},a);var b=J.empty,c=a.item;return J.item(f(a,{image:c.imageUrl?J.image:b,sprite:c.spriteCssClass?J.sprite:b,itemWrapper:J.itemWrapper,arrow:c.items||c.content?J.arrow:b,subGroup:R.renderGroup},K))},renderGroup:function(a){return J.group(f({renderItems:function(a){var b="",c=0,d=a.items,e=d?d.length:0,g=f({length:e},a.group);for(;c<e;c++)b+=R.renderItem(f(a,{group:g,item:f({index:c},d[c])}));return b}},a,K))},renderContent:function(a){return J.content(f(a,K))}}),c.ui.plugin(R)})(jQuery);