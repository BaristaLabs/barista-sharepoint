/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function G(c,d){var e,f=d!==b;if(document.selection){a(c).is(":visible")&&c.focus(),e=document.selection.createRange();if(f)e.move("character",d),e.select();else{var g=c.createTextRange(),h=g.duplicate();g.moveToBookmark(e.getBookmark()),h.setEndPoint("EndToStart",g),d=h.text.length}}else c.selectionStart!==b&&(f?(c.focus(),c.setSelectionRange(d,d)):d=c.selectionStart);return d}function F(a,b){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+a+'" title="'+b+'">'+b+"</span></span>"}var c=window.kendo,d=c.keys,e=c.ui,f=e.Widget,g=c._extractFormat,h=c.parseFloat,i=c.support.placeholder,j=c.support.touch,k=c.getCulture,l="change",m="disabled",n="k-input",o="spin",p=".kendoNumericTextBox",q="touchend",r="mouseleave"+p,s=(j?"touchstart":"mousedown")+p,t=j?"touchmove"+p+" "+q+p:"mouseup"+p+" "+r,u="mouseenter"+p+" "+r,v="k-state-default",w="k-state-focused",x="k-state-hover",y=".",z="k-state-selected",A="k-state-disabled",B=null,C=a.proxy,D={190:".",188:","},E=f.extend({init:function(a,d){var e=this,h=d&&d.step!==b,i,j,k,l;f.fn.init.call(e,a,d),d=e.options,a=e.element.addClass(n).on("keydown"+p,C(e._keydown,e)).on("paste"+p,C(e._paste,e)).on("blur"+p,C(e._focusout,e)),d.placeholder=d.placeholder||a.attr("placeholder"),e._reset(),e._wrapper(),e._arrows(),e._input(),e._text.on("focus"+p,C(e._click,e)),i=e.min(a.attr("min")),j=e.max(a.attr("max")),k=e._parse(a.attr("step")),d.min===B&&i!==B&&(d.min=i),d.max===B&&j!==B&&(d.max=j),!h&&k!==B&&(d.step=k),d.format=g(d.format),l=d.value,e.value(l!==B?l:a.val()),e.enable(!a.is("[disabled]")),c.notify(e)},options:{name:"NumericTextBox",decimals:B,min:B,max:B,value:B,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[l,o],enable:function(a){var b=this,c=b._text.add(b.element),d=b._inputWrapper.off(u),e=b._upArrow.off(s),f=b._downArrow.off(s);b._toggleText(!0),a===!1?(d.removeClass(v).addClass(A),c.attr(m,m)):(d.addClass(v).removeClass(A).on(u,b._toggleHover),c.removeAttr(m),e.on(s,function(a){a.preventDefault(),b._spin(1),b._upArrow.addClass(z)}),f.on(s,function(a){a.preventDefault(),b._spin(-1),b._downArrow.addClass(z)}))},destroy:function(){var a=this;a.element.add(a._text).add(a._upArrow).add(a._downArrow).add(a._inputWrapper).off(p),a._form&&a._form.off("reset",a._resetHandler),f.fn.destroy.call(a)},min:function(a){return this._option("min",a)},max:function(a){return this._option("max",a)},step:function(a){return this._option("step",a)},value:function(a){var c=this,d;if(a===b)return c._value;a=c._parse(a),d=c._adjust(a);a===d&&(c._update(a),c._old=c._value)},focus:function(){this._focusin()},_adjust:function(a){var b=this,c=b.options,d=c.min,e=c.max;if(a===B)return a;d!==B&&a<d?a=d:e!==B&&a>e&&(a=e);return a},_arrows:function(){var b=this,d,e=b.options,f=e.spinners,g=b.element;d=g.siblings(".k-icon"),d[0]||(d=a(F("n",e.upArrowText)+F("s",e.downArrowText)).insertAfter(g),d.wrapAll('<span class="k-select"/>')),d.on(t,function(a){(!j||c.eventTarget(a)!=a.currentTarget||a.type===q)&&clearTimeout(b._spinning),d.removeClass(z)}),f||(d.toggle(f),b._inputWrapper.addClass("k-expand-padding")),b._upArrow=d.eq(0),b._downArrow=d.eq(1)},_blur:function(){var a=this;a._toggleText(!0),a._change(a.element.val())},_click:function(a){var b=this;clearTimeout(b._focusing),b._focusing=setTimeout(function(){var c=a.target,d=G(c),e=c.value.substring(0,d),f=b._format(b.options.format),g=f[","],h=new RegExp("\\"+g,"g"),i=new RegExp("([\\d\\"+g+"]+)(\\"+f[y]+")?(\\d+)?"),j=i.exec(e),k=0;j&&(k=j[0].replace(h,"").length,e.indexOf("(")!=-1&&b._value<0&&k++),b._focusin(),G(b.element[0],k)})},_change:function(a){var b=this;b._update(a),a=b._value,b._old!=a&&(b._old=a,b.trigger(l),b.element.trigger(l))},_culture:function(a){return a||k(this.options.culture)},_focusin:function(){var a=this;a._toggleText(!1),a.element.focus(),a._inputWrapper.addClass(w)},_focusout:function(){var a=this;clearTimeout(a._focusing),a._inputWrapper.removeClass(w),a._blur()},_format:function(a,b){var c=this._culture(b).numberFormat;a=a.toLowerCase(),a.indexOf("c")>-1?c=c.currency:a.indexOf("p")>-1&&(c=c.percent);return c},_input:function(){var b=this,c="k-formatted-value",d=b.element.show()[0],e=b.wrapper,f;f=e.find(y+c),f[0]||(f=a("<input />").insertBefore(d).addClass(c)),d.type="text",f[0].type="text",f[0].style.cssText=d.style.cssText,f.attr("placeholder",b.options.placeholder),b._text=f.attr("readonly",!0).addClass(d.className)},_keydown:function(a){var b=this,c=a.keyCode;c==d.DOWN?b._step(-1):c==d.UP?b._step(1):c==d.ENTER&&b._change(b.element.val()),b._prevent(c)&&!a.ctrlKey&&a.preventDefault()},_paste:function(a){var b=this,c=a.target,d=c.value;setTimeout(function(){b._parse(c.value)===B&&b._update(d)})},_prevent:function(a){var b=this,c=b.element[0],e=c.value,f=b.options,g=f.min,h=b._format(f.format),i=h[y],j=f.decimals,k=G(c),l=!0,m;j===B&&(j=h.decimals),a>16&&a<21||a>32&&a<37||a>47&&a<58||a>95&&a<106||a==d.INSERT||a==d.DELETE||a==d.LEFT||a==d.RIGHT||a==d.TAB||a==d.BACKSPACE||a==d.ENTER?l=!1:D[a]===i&&j>0&&e.indexOf(i)==-1?l=!1:!(g===B||g<0)||e.indexOf("-")!=-1||a!=189&&a!=109||k!==0?a==110&&j>0&&e.indexOf(i)==-1&&(m=e.substring(k),c.value=e.substring(0,k)+i+m):l=!1;return l},_option:function(a,c){var d=this,e=d.options;if(c===b)return e[a];c=d._parse(c);if(!!c||a!=="step")e[a]=d._parse(c)},_spin:function(a,b){var c=this;b=b||500,clearTimeout(c._spinning),c._spinning=setTimeout(function(){c._spin(a,50)},b),c._step(a)},_step:function(a){var b=this,c=b.element,d=b._parse(c.val())||0;document.activeElement!=c[0]&&b._focusin(),d+=b.options.step*a,b._update(b._adjust(d)),b.trigger(o)},_toggleHover:function(b){j||a(b.currentTarget).toggleClass(x,b.type==="mouseenter")},_toggleText:function(a){var b=this;a=!!a,b._text.toggle(a),b.element.toggle(!a)},_parse:function(a,b){return h(a,this._culture(b),this.options.format)},_update:function(a){var b=this,d=b.options,e=d.format,f=d.decimals,g=b._culture(),h=b._format(e,g),i;f===B&&(f=h.decimals),a=b._parse(a,g),i=a!==B,i&&(a=parseFloat(a.toFixed(f))),b._value=a=b._adjust(a),b._placeholder(c.toString(a,e,g)),b.element.val(i?a.toString().replace(y,h[y]):"")},_placeholder:function(a){this._text.val(a),!i&&!a&&this._text.val(this.options.placeholder)},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-numerictextbox"),d.is("span.k-numerictextbox")||(d=c.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),d=d.wrap("<span/>").parent()),d[0].style.cssText=c[0].style.cssText,c[0].style.width="",b.wrapper=d.addClass("k-widget k-numerictextbox").show(),b._inputWrapper=a(d[0].firstChild)},_reset:function(){var a=this,b=a.element,c=b.closest("form");c[0]&&(a._resetHandler=function(){setTimeout(function(){a.value(b[0].value)})},a._form=c.on("reset",a._resetHandler))}});e.plugin(E)})(jQuery);