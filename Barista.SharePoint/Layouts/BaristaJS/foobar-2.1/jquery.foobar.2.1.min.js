/*!
* FooBar - Notification Bars, done right!
* http://bit.ly/getfoobar
*
* Copyright 2012, Steven Usher & Brad Vincent
* http://themergency.com
* http://themergency.com/foobar-a-jquery-notification-plugin/
*
* Date: 20 Feb 2012
* Version : 2.1
*/

(function(a){window.foobar=window.$foobar=a.foobar=function(){return c.init.apply(this,arguments)};a.foobarGoogleCallback=function(){c.googleApi.load.feeds()};var b={height:{bar:30,button:30},width:{left:"*",center:"50%",right:"*",button:"80px"},position:{ignoreOffsetMargin:false,bar:"top",button:"right",social:"left"},display:{type:"expanded",delay:0,speed:250,backgroundColor:"#6c9e00",border:"solid 3px #FFF",button:{type:"toggle",spacer:true,backgroundColor:null,border:null},theme:{bar:"triangle-arrow",navigation:null},easing:"swing",shadow:true,adjustPageHeight:true,rtl:false},cookie:{enabled:false,name:"foobar-state",duration:1,version:1},messages:[],message:{delay:4e3,fadeDelay:300,random:false,navigation:false,cssClass:null,scroll:{enabled:true,speed:50,delay:2e3},font:{family:"Verdana",size:"10pt",color:"White",decoration:null,shadow:null,weight:null},aFont:{family:"Verdana",size:"10pt",color:"LightYellow",decoration:"underline",shadow:null,weight:null,hover:{family:null,size:null,color:null,decoration:null,shadow:null,weight:null}}},rightHtml:null,leftHtml:null,social:{text:"Follow us",cssClass:null,font:{family:"Verdana",size:"10pt",color:"White",decoration:null,shadow:null,weight:null},profiles:[]},rss:{enabled:false,url:null,maxResults:5,linkText:"Read More",linkTarget:"_blank"},twitter:{enabled:false,user:null,maxTweets:5},events:{expanding:null,collapsing:null,setExpanded:null,setCollapsed:null,preRender:null,postRender:null}};var c={settings:{},elements:{main:{wrapper:null,shadow:null,container:null,row:null},left:{container:null,inner:null},center:{container:null,inner:null},right:{container:null,inner:null},message:null,open:{button:null,container:null},close:{button:null,container:null,spacer:null},prev:null,next:null},_internals:{state:{firstrun:true,initialized:false,open:false,top:false,busy:false},offsetMargin:0,actualHeight:0,shadowHeight:5,tabShadowHeight:11},utils:{isNotNullOrEmpty:function(a){return typeof a=="string"&&a!==null&&a!==""},preventDefault:function(a){if(typeof a!="undefined"&&a!==null&&typeof a.preventDefault=="function"){a.preventDefault()}},applyFont:function(b,d){var e={family:null,size:null,color:null,decoration:null,shadow:null};var f=a.extend({},e,d);if(c.utils.isNotNullOrEmpty(f.family)){b.css("font-family",f.family)}if(c.utils.isNotNullOrEmpty(f.size)){b.css("font-size",f.size)}if(c.utils.isNotNullOrEmpty(f.color)){b.css("color",f.color)}if(c.utils.isNotNullOrEmpty(f.decoration)){b.css("text-decoration",f.decoration)}if(c.utils.isNotNullOrEmpty(f.shadow)){b.css("text-shadow",f.shadow)}if(c.utils.isNotNullOrEmpty(f.weight)){b.css("font-weight",f.weight)}},setCookie:function(a){var b="";if(c.settings.cookie.duration){var d=new Date;d.setTime(d.getTime()+c.settings.cookie.duration*24*60*60*1e3);b="; expires="+d.toGMTString()}document.cookie=c.settings.cookie.name+"="+a+"|"+c.settings.cookie.version+b+"; path=/"},getCookie:function(){var a=c.settings.cookie.name+"=";var b=document.cookie.split(";");for(var d=0;d<b.length;d++){var e=b[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(a)===0)return c.utils.parse.cookie(e.substring(a.length,e.length))}return null},deleteCookie:function(){var a=new Date;a.setTime(a.getTime()+ -1*24*60*60*1e3);document.cookie=c.settings.cookie.name+"=; expires="+a.toGMTString()+"; path=/"},formatTweetHtml:function(a){var b=c.settings.twitter.user+": ";if(a.indexOf(b)===0){a=a.substring(b.length)}a=" "+a;a=a.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(a,b,c,d,e){var f=c.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+f+b+'">'+b+"</a>"+e});a=a.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g,function(a,b){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+b+'">@'+b+"</a>"});a=a.replace(/\B[@＠]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(a,b){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+b+'">@'+b+"</a>"});a=a.replace(/(^|\s+)#(\w+)/gi,function(a,b,c){return b+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+c+'">#'+c+"</a>"});return a},raise:function(b){try{if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments);d.shift();b.apply(c,d)}}catch(e){console.error(e)}},parse:{cookie:function(a){if(typeof a==="string"){if(a.indexOf("|")==-1){return{expanded:c.utils.parse.bool(a,false),version:-1}}else{var b=a.split("|");if(b.length==2){return{expanded:c.utils.parse.bool(b[0],false),version:c.utils.parse.integer(b[1],-1)}}}}return null},bool:function(a,b){b=b||false;switch(typeof a){case"string":{switch(a.toLowerCase()){case"1":case"true":return true;case"0":case"false":return false;default:return b}};case"number":{switch(a){case 1:return true;case 0:return false;default:return b}};case"boolean":return a;default:return b}},integer:function(a,b){b=b||null;switch(typeof a){case"string":{var c=parseInt(a);return isNaN(c)?b:c};case"number":return a;default:return b}},html:function(b){if(!c.utils.isNotNullOrEmpty(b)){return b}if(b&&b.match("{{include:(.*?)}}")){var d=new RegExp("{{include:(.*?)}}");var e=d.exec(b);while(e!==null){var f=a(e[1]).html();b=b.replace(e[0],f);e=d.exec(b)}}return b},width:function(a){return typeof a!="undefined"&&a!=null&&a!="*"&&a!="100%"?{width:a}:{width:"auto"}},borderWidth:function(b,d){var e=a("<div></div>").css({border:b,position:"absolute",visibility:"hidden"}).appendTo("body");var f=c.utils.parse.integer(e.css("border-top-width"),d);e.remove();return f}},checks:{isMultipart:function(a,b){return typeof a!="undefined"&&a!==null&&a.length>0&&a.indexOf(b)!=-1},hasProperties:function(a){if(typeof a!=="object"){return false}for(var b in a){if(a.hasOwnProperty(b)){return true}}return false},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"}},property:{get:function(a,b){try{if(c.utils.checks.isMultipart(b,".")){var d=b.substring(0,b.indexOf("."));var e=b.substring(b.indexOf(".")+1);a[d]=a[d]||{};return c.utils.property.get(a[d],e)}return a[b]}catch(f){console.error(f);return null}},set:function(a,b,d){try{if(c.utils.checks.isMultipart(b,".")){var e=b.substring(0,b.indexOf("."));var f=b.substring(b.indexOf(".")+1);a[e]=a[e]||{};c.utils.property.set(a[e],f,d)}else{a[b]=d}}catch(g){console.error(g)}},merge:function(b,d){try{for(var e in d){if(d.hasOwnProperty(e)){if(c.utils.checks.hasProperties(d[e])&&!c.utils.checks.isArray(d[e])){b[e]=b[e]||{};c.utils.property.merge(b[e],d[e])}else if(c.utils.checks.isArray(d[e])){b[e]=[];a.extend(true,b[e],d[e])}else{b[e]=d[e]}}}}catch(f){console.error(f)}}}},messageLoop:{id:null,paused:false,sizes:[],index:{current:-1,next:0,_random:function(){if(c.settings.messages.length<=1){return 0}var a=0,b=c.settings.messages.length-1;var d=Math.floor(Math.random()*(b-a+1)+a);return d==c.messageLoop.index.current?c.messageLoop.index._random():d},_setCurrent:function(){if(c.settings.message.random&&c.messageLoop.index.current==-1&&c.settings.messages.length>1){c.messageLoop.index.current=c.messageLoop.index._random()}else{c.messageLoop.index.current=c.messageLoop.index.next}},_setNext:function(){if(c.settings.message.random&&c.settings.messages.length>1){c.messageLoop.index.next=c.messageLoop.index._random()}else if(c.messageLoop.index.next>=c.settings.messages.length-1){c.messageLoop.index.next=0}else{c.messageLoop.index.next++}}},create:function(){if(a(".foobar-message-wrapper").length!==c.settings.messages.length||c.messageLoop.sizes.length!=c.settings.messages.length){c.elements.message.empty();for(var b=0;b<c.settings.messages.length;b++){var d=a("<div></div>").attr("id","foobar-message-"+b).addClass("foobar-message-wrapper").css({position:"absolute",display:"inline-block",visibility:"hidden"}).html(c.utils.parse.html(c.settings.messages[b]));c.elements.message.append(d);c.messageLoop._style(d);c.messageLoop.sizes[b]={width:d.width(),height:d.height()}}}c.elements.message.children().hide();c.elements.center.container.unbind("mouseenter mouseleave");c.elements.prev.add(c.elements.next).unbind("click");if(c.settings.messages.length>1){c.elements.center.container.hover(c.messageLoop.pause,c.messageLoop.resume);c.elements.prev.click(c.messageLoop.prev);c.elements.next.click(c.messageLoop.next)}},start:function(b){b=b||false;if(!c._internals.state.open||c.settings.messages.length===0||c.messageLoop.index.current==c.messageLoop.index.next){return}if(!b&&c.messageLoop.paused){c.messageLoop.id=setTimeout(c.messageLoop.start,c.settings.message.delay);return}c.messageLoop.stop();c.messageLoop.index._setCurrent();c.messageLoop.create();var d=c.elements.center.container.width();var e=c.messageLoop.sizes[c.messageLoop.index.current].width;var f=c.messageLoop.sizes[c.messageLoop.index.current].height;a("#foobar-message-"+c.messageLoop.index.current).css({position:"static",display:"inline-block",visibility:"visible",opacity:100,"margin-left":0,width:e,"min-height":f,"max-height":c.settings.height.bar});c.elements.message.css({"min-height":f,"max-height":c.settings.height.bar});c.messageLoop.index._setNext();if(e>d){c.messageLoop._scroll(e-d,b)}else if(c.messageLoop.index.next!=c.messageLoop.index.current){c.messageLoop.id=setTimeout(function(){c.messageLoop._fade(b)},c.settings.message.delay)}},stop:function(){if(typeof c.messageLoop.id!="undefined"&&c.messageLoop.id!==null){clearTimeout(c.messageLoop.id)}a("#foobar-message-"+c.messageLoop.index.current).stop(false,false).css("margin-left",0);c.messageLoop.id=null},pause:function(){if(c.settings.message.navigation&&!c.messageLoop.paused){c.elements.prev.add(c.elements.next).stop(false,true).fadeIn("fast")}c.messageLoop.paused=true},resume:function(){if(c.settings.message.navigation&&c.messageLoop.paused){c.elements.prev.add(c.elements.next).stop(false,true).fadeOut("fast")}c.messageLoop.paused=false},next:function(){if(c.settings.messages.length>1){c.messageLoop.stop();a("#foobar-message-"+c.messageLoop.index.current).stop(false,false).css("margin-left",0);var b=c.messageLoop.index.current+1;b=b<=c.settings.messages.length-1?b:0;c.messageLoop.index.next=b;c.messageLoop.start(true)}},prev:function(){if(c.settings.messages.length>1){c.messageLoop.stop();a("#foobar-message-"+c.messageLoop.index.current).stop(false,false).css("margin-left",0);var b=c.messageLoop.index.current-1;b=b>=0?b:c.settings.messages.length-1;c.messageLoop.index.next=b;c.messageLoop.start(true)}},_scroll:function(b,d){var e=a("#foobar-message-"+c.messageLoop.index.current).css("margin-left",c.settings.display.rtl?-b:0);if(c.settings.message.scroll.enabled){var f=Math.round(b/c.settings.message.scroll.speed)*1e3;var g={"margin-left":c.settings.display.rtl?0:-b};e.delay(c.settings.message.scroll.delay).animate(g,f,"linear",function(){if(c.messageLoop.index.next==c.messageLoop.index.current){c.messageLoop.id=setTimeout(function(){c.messageLoop._reset(d)},c.settings.message.delay)}else{c.messageLoop.id=setTimeout(function(){c.messageLoop._fade(d)},c.settings.message.delay)}})}},_reset:function(b){b=b||false;if(c.messageLoop.paused){c.messageLoop.id=setTimeout(function(){c.messageLoop._reset(b)},c.settings.message.delay);return}a("#foobar-message-"+c.messageLoop.index.current).stop(false,false).css("margin-left",0);c.messageLoop.index.current=-1;c.messageLoop.start(b)},_fade:function(b){b=b||false;if(c.messageLoop.paused){c.messageLoop.id=setTimeout(function(){c.messageLoop._fade(b)},c.settings.message.delay);return}a("#foobar-message-"+c.messageLoop.index.current).animate({opacity:0},c.settings.message.fadeDelay,function(){c.messageLoop.start(b)})},_style:function(b){if(c.utils.isNotNullOrEmpty(c.settings.message.cssClass)){b.addClass(c.settings.message.cssClass)}else{c.utils.applyFont(b,c.settings.message.font);var d=b.find("a");c.utils.applyFont(d,c.settings.message.aFont);d.unbind("mouseenter mouseleave").bind({mouseenter:function(){c.utils.applyFont(a(this),c.settings.message.aFont.hover)},mouseleave:function(){c.utils.applyFont(a(this),c.settings.message.aFont)}})}}},googleApi:{check:{core:function(){return typeof google!="undefined"},feeds:function(){return c.googleApi.check.core()&&typeof google.feeds!="undefined"}},load:{core:function(){a("<script></script>").attr("type","text/javascript").attr("src","http://www.google.com/jsapi?callback=jQuery.foobarGoogleCallback").appendTo("head")},feeds:function(){google.load("feeds","1",{callback:c.googleApi.fetch.messages})}},fetch:{messages:function(){if(c.settings.twitter.enabled&&c.utils.isNotNullOrEmpty(c.settings.twitter.user)){c.googleApi.fetch.twitter()}if(c.settings.rss.enabled&&c.utils.isNotNullOrEmpty(c.settings.rss.url)){c.googleApi.fetch.rss()}},twitter:function(){var a="http://api.twitter.com/1/statuses/user_timeline.rss?trim_user=0&screen_name="+c.settings.twitter.user;var b=new google.feeds.Feed(a);b.setNumEntries(c.settings.twitter.maxTweets);b.load(function(a){c.messageLoop.stop();if(!a.error){for(var b=0;b<a.feed.entries.length;b++){var d=c.utils.formatTweetHtml(a.feed.entries[b].title);c.settings.messages.push(d)}}else{console.error(a.error.message)}c.elements.message.stop(false,true).css({left:0,opacity:100});c.messageLoop.start(true)})},rss:function(){var a=new google.feeds.Feed(c.settings.rss.url);a.setNumEntries(c.settings.rss.maxResults);a.load(function(a){c.messageLoop.stop();if(!a.error){for(var b=0;b<a.feed.entries.length;b++){var d=a.feed.entries[b].title;if(c.utils.isNotNullOrEmpty(c.settings.rss.linkText)){d+=' <a href="'+a.feed.entries[b].link+'" target="'+c.settings.rss.linkTarget+'">'+c.settings.rss.linkText+"</a>"}c.settings.messages.push(d)}}else{console.error(a.error.message)}c.elements.message.stop(false,true).css({left:0,opacity:100});c.messageLoop.start(true)})}}},init:function(d,e,f){if(typeof d==="string"){switch(d){case"open":c.expand(null);break;case"close":c.collapse(null);break;case"toggle":c.toggle();break;case"destroy":c.destroy();break;case"prev":c.messageLoop.prev();break;case"next":c.messageLoop.next();break;case"start":c.messageLoop.start();break;case"stop":c.messageLoop.stop();break;case"option":{switch(arguments.length){case 3:c.option.set(e,f);break;case 2:{if(typeof e==="string"){return c.option.get(e)}c.option.set(e,null)}}break};default:c.render(a.extend(true,{},b,{messages:[d]}));break}}else{c.render(a.extend(true,{},b,d))}return false},create:function(){if(a(".foobar-wrapper").length===0){c.elements.main.wrapper=a("<div></div>").addClass("foobar-wrapper");c.elements.main.container=a("<table></table>").attr({cellpadding:0,cellspacing:0}).addClass("foobar-container");c.elements.main.row=a("<tr></tr>").addClass("foobar-container-row");c.elements.main.shadow=a("<div></div>").addClass("foobar-shadow");c.elements.left.container=a("<td></td>").addClass("foobar-container-left");c.elements.left.inner=a("<div></div>").addClass("foobar-container-inner");c.elements.center.container=a("<td></td>").addClass("foobar-container-center");c.elements.center.inner=a("<div></div>").addClass("foobar-container-inner");c.elements.right.container=a("<td></td>").addClass("foobar-container-right");c.elements.right.inner=a("<div></div>").addClass("foobar-container-inner");c.elements.prev=a("<div></div>").addClass("foobar-prev-button");c.elements.next=a("<div></div>").addClass("foobar-next-button");c.elements.message=a("<div></div>").addClass("foobar-message");c.elements.close.spacer=a("<td></td>").addClass("foobar-close-button-spacer");c.elements.close.container=a("<td></td>").addClass("foobar-close-button-container");c.elements.close.button=a("<span></span>").addClass("foobar-close-button");c.elements.open.container=a("<div></div>").addClass("foobar-open-button-container");c.elements.open.button=a("<span></span>").addClass("foobar-open-button");c.elements.main.wrapper.append(c.elements.main.container.append(c.elements.main.row)).append(c.elements.main.shadow).append(c.elements.open.container);c.elements.main.row.append(c.elements.left.container.append(c.elements.left.inner)).append(c.elements.center.container.append(c.elements.center.inner.append(c.elements.message).append(c.elements.prev).append(c.elements.next))).append(c.elements.right.container.append(c.elements.right.inner)).append(c.elements.close.container);c.elements.close.container.append(c.elements.close.button);c.elements.open.container.append(c.elements.open.button);a("body").prepend(c.elements.main.wrapper)}else{c.elements.main.wrapper=a(".foobar-wrapper");c.elements.main.container=a(".foobar-container");c.elements.main.row=a(".foobar-container-row");c.elements.main.shadow=a(".foobar-shadow");c.elements.left.container=a(".foobar-container-left");c.elements.left.inner=a(".foobar-container-left .foobar-container-inner");c.elements.center.container=a(".foobar-container-center");c.elements.center.inner=a(".foobar-container-center .foobar-container-inner");c.elements.right.container=a(".foobar-container-right");c.elements.right.inner=a(".foobar-container-right .foobar-container-inner");c.elements.prev=a(".foobar-prev-button");c.elements.next=a(".foobar-next-button");c.elements.message=a(".foobar-message");c.elements.close.spacer=a(".foobar-close-button-spacer");c.elements.close.container=a(".foobar-close-button-container");c.elements.close.button=a(".foobar-close-button");c.elements.open.container=a(".foobar-open-button-container");c.elements.open.button=a(".foobar-open-button")}c._internals.state.initialized=true},_render:{allow:function(){var a=c.utils.getCookie();if(a!=null&&a.version==c.settings.cookie.version&&c.settings.cookie.enabled&&!a.expanded&&c.settings.display.button.type=="close"){c.destroy();return false}else if(a!=null&&a.version!=c.settings.cookie.version&&c.settings.cookie.enabled&&!a.expanded&&c.settings.display.button.type=="close"){c.utils.deleteCookie()}return true},init:function(){c._internals.state.top=c.settings.position.bar!="bottom";if(!c._internals.state.initialized){c._internals.offsetMargin=c.utils.parse.integer(a("html").css(c._internals.state.top?"margin-top":"margin-bottom"),0);c._internals.offsetMargin=c.settings.position.ignoreOffsetMargin?0:c._internals.offsetMargin;c.create()}else{c.elements.left.inner.add(c.elements.right.inner).empty()}if(c.settings.display.button.type=="close"){c.elements.open.container.addClass("hidden")}else{c.elements.open.container.removeClass("hidden")}c.elements.main.container.show()},theme:function(){if(c.settings.display.theme.navigation==null){c.settings.display.theme.navigation=c.settings.display.theme.bar}c.elements.main.wrapper.removeClass().addClass(c.settings.display.theme.bar).addClass("foobar-wrapper");c.elements.prev.removeClass().addClass(c.settings.display.theme.navigation).addClass("foobar-prev-button");c.elements.next.removeClass().addClass(c.settings.display.theme.navigation).addClass("foobar-next-button")},backgroundColor:function(){if(c.settings.display.button.backgroundColor==null){c.settings.display.button.backgroundColor=c.settings.display.backgroundColor}c.elements.main.container.add(c.elements.prev).add(c.elements.next).add(c.elements.open.button).css({"background-color":c.settings.display.backgroundColor});c.elements.open.button.css({"background-color":c.settings.display.button.backgroundColor})},shadow:function(){if(c.settings.display.shadow){c.elements.main.wrapper.addClass("shadow")}else{c.elements.main.wrapper.removeClass("shadow")}c._internals.shadowHeight=c.elements.main.shadow.height()},border:function(){if(c.settings.display.button.border==null){c.settings.display.button.border=c.settings.display.border}c.elements.main.container.css("border","none").css(c._internals.state.top?"border-bottom":"border-top",c.settings.display.border);c.elements.open.button.css("border",c.settings.display.button.border).css(c._internals.state.top?"border-top":"border-bottom","none")},height:function(){c.elements.open.container.height(c.settings.height.button+c._internals.tabShadowHeight);c.elements.open.button.height(c.settings.height.button);c.elements.main.container.add(c.elements.close.button).add(c.elements.prev).add(c.elements.next).add(c.elements.left.container).add(c.elements.center.container).add(c.elements.right.container).height(c.settings.height.bar);c.elements.left.inner.add(c.elements.center.inner).add(c.elements.right.inner).css("max-height",c.settings.height.bar);var a=c.utils.parse.borderWidth(c.settings.display.border,0);c._internals.actualHeight=c.settings.height.bar+c._internals.shadowHeight+a;c.elements.main.wrapper.height(c._internals.actualHeight);c.elements.prev.add(c.elements.next).css("margin-top",-(c.settings.height.bar/2))},position:function(){c.elements.main.wrapper.removeClass("inline top bottom").addClass(c.settings.position.bar);if(!c._internals.state.top){c.elements.main.container.before(c.elements.main.shadow)}else{c.elements.main.container.after(c.elements.main.shadow)}c.elements.main.wrapper.add(c.elements.open.container).css(c._internals.state.top?"bottom":"top","auto").css(c._internals.state.top?"top":"bottom",c.settings.position.bar=="inline"?0:c._internals.offsetMargin);var a=c.utils.parse.borderWidth(c.settings.display.button.border,0);var b=-(c.elements.open.button.width()/2+a);c.elements.open.button.css("margin-left",b);c.elements.close.spacer.detach();c.elements.left.container.css(c.utils.parse.width(c.settings.width.left));c.elements.center.container.css(c.utils.parse.width(c.settings.width.center));c.elements.right.container.css(c.utils.parse.width(c.settings.width.right));c.elements.close.container.add(c.elements.close.spacer).add(c.elements.open.container).css(c.utils.parse.width(c.settings.width.button));if(c.settings.position.button=="right"){if(c.settings.display.button.spacer){c.elements.close.spacer.insertBefore(c.elements.center.container)}c.elements.close.container.insertAfter(c.elements.right.container).show();c.elements.open.container.css({left:"auto",right:"0px"}).show()}else if(c.settings.position.button=="left"){if(c.settings.display.button.spacer){c.elements.close.spacer.insertAfter(c.elements.center.container)}c.elements.close.container.insertBefore(c.elements.left.container).show();c.elements.open.container.css({right:"auto",left:"0px"}).show()}else{c.elements.close.container.hide();c.elements.open.container.hide()}},social:function(){if(c.settings.position.social=="left"||c.settings.position.social=="right"){if(c.settings.social.profiles.length>0){var b=a(".foobar-social").length>0?a(".foobar-social"):a("<ul></ul>").addClass("foobar-social");b.empty();if(c.utils.isNotNullOrEmpty(c.settings.social.text)){var d=a("<li></li>").addClass("foobar-social-text").text(c.settings.social.text).css({height:c.settings.height.bar,"line-height":c.settings.height.bar+"px"});if(c.utils.isNotNullOrEmpty(c.settings.social.cssClass)){d.addClass(c.settings.social.cssClass)}else{c.utils.applyFont(d,c.settings.social.font)}b.append(d)}var e={name:null,url:null,image:null,target:"_blank"};a.each(c.settings.social.profiles,function(d,f){var g=a.extend({},e,f);if(g.name!==null&&g.url!==null&&g.image!==null){var h=a("<a></a>").attr("href",g.url).attr("title",g.name).attr("target",g.target).css({background:"url('"+g.image+"') no-repeat center center",height:c.settings.height.bar});b.append(a("<li></li>").css({height:c.settings.height.bar}).append(h))}});if(c.settings.position.social=="right"){b.css("float","right");c.elements.right.inner.append(b)}else if(c.settings.position.social=="left"){b.css("float","left");c.elements.left.inner.append(b)}b.children("li").css({"float":c.settings.display.rtl?"right":"left","text-align":c.settings.display.rtl?"right":"left"})}else{a(".foobar-social").remove()}}else{a(".foobar-social").remove()}},customHtml:function(){if(c.utils.isNotNullOrEmpty(c.settings.rightHtml)){c.elements.right.inner.append(c.utils.parse.html(c.settings.rightHtml))}if(c.utils.isNotNullOrEmpty(c.settings.leftHtml)){c.elements.left.inner.append(c.utils.parse.html(c.settings.leftHtml))}},cookie:function(){var b=c.utils.getCookie();if(b===null||b.version!=c.settings.cookie.version||!c.settings.cookie.enabled){if(!c.settings.cookie.enabled||b!==null&&b.version!=c.settings.cookie.version){c.utils.deleteCookie()}switch(c.settings.display.type){case"onscroll":c.setCollapsed();a(window).one("scroll",function(){setTimeout(c.expand,c.settings.display.delay)});break;case"delayed":c.setCollapsed();setTimeout(c.expand,c.settings.display.delay);break;case"collapsed":c.setCollapsed();break;case"expanded":default:c.setExpanded();break}}else{b.expanded?c.setExpanded():c.setCollapsed()}},finalise:function(){if(c.settings.display.button.type=="close"){c.elements.open.button.unbind().hide();c.elements.close.button.unbind().click(function(a){c.collapse(a,c.destroy)})}else{c.elements.open.button.unbind().click(c.expand);c.elements.close.button.unbind().click(c.collapse)}a(".foobar-message-wrapper").remove();c.messageLoop.paused=false;c.messageLoop.index.next=0;c.messageLoop.index.current=-1;var b=true,d=false;if(c.settings.twitter.enabled&&c.utils.isNotNullOrEmpty(c.settings.twitter.user)){b=false;if(c.googleApi.check.core()&&c.googleApi.check.feeds()){c.googleApi.fetch.twitter()}else{d=true}}if(c.settings.rss.enabled&&c.utils.isNotNullOrEmpty(c.settings.rss.url)){b=false;if(c.googleApi.check.core()&&c.googleApi.check.feeds()){c.googleApi.fetch.rss()}else{d=true}}if(d){if(c.googleApi.check.feeds()){c.googleApi.load.feeds()}else{c.googleApi.load.core()}}if(b){c.elements.message.stop(true,false).css("opacity",100);c.messageLoop.start()}c._internals.state.firstrun=false;var e=a.browser;if(e.msie&&parseInt(e.version)==8){var f=c.elements.main.container.css("display");c.elements.main.container.css({visibility:"hidden",display:"inline-table"});c.elements.main.shadow.css("visibility","hidden");setTimeout(function(){c.elements.main.container.css({visibility:"visible",display:f});c.elements.main.shadow.css("visibility","visible")},0)}}},render:function(a){c.settings=a;if(c._render.allow()){c.utils.raise(c.settings.events.preRender,c.settings);c._render.init();c._render.theme();c._render.backgroundColor();c._render.shadow();c._render.border();c._render.height();c._render.position();c._render.social();c._render.customHtml();c._render.cookie();c._render.finalise();c.utils.raise(c.settings.events.postRender,c.settings)}},destroy:function(){if(!c._internals.state.initialized){return}if(c.settings.display.adjustPageHeight){var b={"margin-top":0,"margin-bottom":0};if(c.settings.position.bar!="inline"){b[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin<=0?0:c._internals.offsetMargin-c.settings.height.bar}else{b[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin}a("html").css(b)}c.elements.main.wrapper.remove();c._internals.state.initialized=false},toggle:function(){if(!c._internals.state.initialized){return}if(c._internals.state.open){c.collapse(null)}else{c.expand(null)}},expand:function(b){c.utils.preventDefault(b);if(!c._internals.state.initialized||c._internals.state.open||c._internals.state.busy){return}c._internals.state.busy=true;c.elements.open.button.stop(false,true).animate({height:0},c.settings.display.speed);c.elements.open.container.stop(false,true).animate({height:0},c.settings.display.speed,function(){if(c.settings.display.adjustPageHeight){var b={};if(c.settings.position.bar!="inline"){b[c._internals.state.top?"margin-bottom":"margin-top"]=0;var d={};d[c._internals.state.top?"margin-top":"margin-bottom"]="+="+c.settings.height.bar;a("html").css(b).stop(false,true).animate(d,c.settings.display.speed)}else{b[c._internals.state.top?"margin-bottom":"margin-top"]=0;b[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin;a("html").css(b)}}c.utils.raise(c.settings.events.expanding,c.settings);c.elements.main.container.show();c.elements.main.wrapper.stop(false,true).animate({height:c._internals.actualHeight},c.settings.display.speed,c.settings.display.easing,function(){c.elements.main.wrapper.focus();c._internals.state.open=true;c.messageLoop.start(true);c._internals.state.busy=false})});if(c.settings.cookie.enabled){c.utils.setCookie(true)}},collapse:function(b,d){c.utils.preventDefault(b);if(!c._internals.state.initialized||!c._internals.state.open||c._internals.state.busy){return}c._internals.state.busy=true;c.messageLoop.stop();if(c.settings.display.adjustPageHeight){var e={};if(c.settings.position.bar!="inline"){e[c._internals.state.top?"margin-bottom":"margin-top"]=0;var f={};f[c._internals.state.top?"margin-top":"margin-bottom"]="-="+c.settings.height.bar;a("html").css(e).stop(false,true).animate(f,c.settings.display.speed)}else{e[c._internals.state.top?"margin-bottom":"margin-top"]=0;e[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin;a("html").css(e)}}c.utils.raise(c.settings.events.collapsing,c.settings);c.elements.main.wrapper.stop(false,true).animate({height:c._internals.shadowHeight},c.settings.display.speed,function(){c.elements.main.container.hide();c.elements.open.container.stop(false,true).animate({height:c.settings.height.button+c._internals.tabShadowHeight},c.settings.display.speed,c.settings.display.easing);c.elements.open.button.stop(false,true).animate({height:c.settings.height.button},c.settings.display.speed,c.settings.display.easing,function(){if(a.isFunction(d)){d.call()}c._internals.state.busy=false})});c._internals.state.open=false;if(c.settings.cookie.enabled){c.utils.setCookie(false)}},setExpanded:function(){if(!c._internals.state.initialized||c._internals.state.busy){return}c.elements.main.wrapper.height(c._internals.actualHeight);c.elements.main.container.show();c.elements.open.container.add(c.elements.open.button).height(0);if(c.settings.display.adjustPageHeight&&c.settings.position.bar!="inline"){var b={"margin-top":0,"margin-bottom":0};b[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin<=0?c.settings.height.bar:c._internals.offsetMargin+c.settings.height.bar;a("html").css(b)}if(c._internals.state.firstrun||!c._internals.state.open){c.utils.raise(c.settings.events.setExpanded,c.settings)}c._internals.state.open=true;if(c.settings.cookie.enabled){c.utils.setCookie(true)}},setCollapsed:function(){if(!c._internals.state.initialized||c._internals.state.busy){return}c.elements.main.wrapper.height(c._internals.shadowHeight);c.elements.main.container.hide();c.elements.open.container.height(c.settings.height.button+c._internals.tabShadowHeight);c.elements.open.button.height(c.settings.height.button);if(c.settings.display.adjustPageHeight&&c.settings.position.bar!="inline"){var b={"margin-top":0,"margin-bottom":0};b[c._internals.state.top?"margin-top":"margin-bottom"]=c._internals.offsetMargin;a("html").css(b)}if(c._internals.state.firstrun||c._internals.state.open){c.utils.raise(c.settings.events.setCollapsed,c.settings)}c._internals.state.open=false;if(c.settings.cookie.enabled){c.utils.setCookie(false)}},option:{get:function(a){return c.utils.property.get(c.settings,a)},set:function(a,b){if(typeof a==="string"){c.utils.property.set(c.settings,a,b)}else{c.utils.property.merge(c.settings,a)}c.render(c.settings)}}}})(jQuery);var google;var console;if(!window.console){console={}}console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};var JSON;if(!JSON){JSON={}}JSON.stringify=JSON.stringify||function(){}