/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function T(a,c,e){var f,g,h=0,i=c&&c.length,j=e&&e.length;while(a&&a.parentNode){for(h=0;h<i;h++){f=c[h];if(f.element[0]===a)return{target:f,targetElement:a}}for(h=0;h<j;h++){g=e[h];if(d.matchesSelector.call(a,g.options.filter))return{target:g,targetElement:a}}a=a.parentNode}return b}function S(b){b.preventDefault();var c=a(b.target),d=c.closest(".k-widget").parent();d[0]||(d=c.parent()),d.trigger(b.type)}function R(a,b){return a.replace(/ /g,b+" ")}function Q(a,b){var c=a.offset(),d=c.left+O(a,"borderLeftWidth")+O(a,"paddingLeft"),e=c.top+O(a,"borderTopWidth")+O(a,"paddingTop"),f=d+a.width()-b.outerWidth(!0),g=e+a.height()-b.outerHeight(!0);return{x:{min:d,max:f},y:{min:e,max:g}}}function P(a,b){return Math.min(Math.max(a,b.min),b.max)}function O(a,b){return parseInt(a.css(b),10)||0}function N(a){return u?f.elementFromPoint(a.x.screen,a.y.screen):f.elementFromPoint(a.x.client,a.y.client)}function M(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}var c=window.kendo,d=c.support,e=d.pointers,f=window.document,g=a(f.documentElement),h=c.Class,i=c.ui.Widget,j=c.Observable,k=a.proxy,l=a.now,m=a.extend,n=c.getOffset,o={},p={},q={},r,s=d.mobileOS,t=s&&s.android,u=t&&s.browser=="chrome",v="mousedown",w="mousemove",x="mouseup mouseleave",y="keyup",z="change",A="dragstart",B="drag",C="dragend",D="dragcancel",E="dragenter",F="dragleave",G="drop",H="start",I="move",J="end",K="cancel",L="tap";d.touch&&(v="touchstart",w="touchmove",x="touchend touchcancel"),e&&(v="MSPointerDown",w="MSPointerMove",x="MSPointerUp MSPointerCancel");var U=h.extend({init:function(a){this.axis=a},start:function(a,b){var c=this,d=a["page"+c.axis];c.startLocation=c.location=d,c.client=a["client"+c.axis],c.screen=a["screen"+c.axis],c.velocity=c.delta=0,c.timeStamp=b},move:function(a,b){var c=this,d=a["page"+c.axis];if(!!d||!t)c.delta=d-c.location,c.location=d,c.client=a["client"+c.axis],c.screen=a["screen"+c.axis],c.initialDelta=d-c.startLocation,c.velocity=c.delta/(b-c.timeStamp),c.timeStamp=b}}),V=j.extend({init:function(b,f){var h=this,i={},l,n,o="."+c.guid();f=f||{},l=h.filter=f.filter,h.threshold=f.threshold||0,b=a(b),j.fn.init.call(h),i[R(w,o)]=k(h._move,h),i[R(x,o)]=k(h._end,h),m(h,{x:new U("X"),y:new U("Y"),element:b,surface:f.global?g:f.surface||b,stopPropagation:f.stopPropagation,pressed:!1,eventMap:i,ns:o}),b.on(v,l,k(h._start,h)),e&&b.css("-ms-touch-action","pinch-zoom double-tap-zoom"),f.preventDragEvent&&b.on("dragstart",!1);if(!f.allowSelection){var p=["mousedown selectstart",l,S];l instanceof a&&p.splice(2,0,null),b.on.apply(b,p)}d.eventCapture&&(n=function(a){h.moved&&a.preventDefault()},h.surface[0].addEventListener(d.mouseup,n,!0)),h.bind([L,H,I,J,K],f)},capture:function(){V.captured=!0},cancel:function(){this._cancel(),this.trigger(K)},skip:function(){this._cancel()},_cancel:function(){var a=this;a.moved=a.pressed=!1,a.surface.off(a.ns)},_start:function(b){var c=this,f=c.filter,g=b.originalEvent,h,i=b;if(!c.pressed){f?c.target=a(b.target).is(f)?a(b.target):a(b.target).closest(f):c.target=c.element;if(!c.target.length)return;c.currentTarget=b.currentTarget,c.stopPropagation&&b.stopPropagation(),c.pressed=!0,c.moved=!1,c.startTime=null,d.touch&&(h=g.changedTouches[0],c.touchID=h.identifier,i=h),e&&(c.touchID=g.pointerId,i=g),c._perAxis(H,i,l()),c.surface.off(c.eventMap).on(c.eventMap),V.captured=!1}},_move:function(a){var b=this,c,d,e;!b.pressed||b._withEvent(a,function(f){b._perAxis(I,f,l());if(!b.moved){c=b.x.initialDelta,d=b.y.initialDelta,e=Math.sqrt(c*c+d*d);if(e<=b.threshold)return;if(!V.captured)b.startTime=l(),b._trigger(H,a),b.moved=!0;else return b._cancel()}b.pressed&&b._trigger(I,a)})},_end:function(a){var b=this;!b.pressed||b._withEvent(a,function(){b.moved?(b.endTime=l(),b._trigger(J,a),b.moved=!1):b._trigger(L,a),b._cancel()})},_perAxis:function(a,b,c){this.x[a](b,c),this.y[a](b,c)},_trigger:function(a,b){var c={x:this.x,y:this.y,target:this.target,event:b};this.trigger(a,c)&&b.preventDefault()},_withEvent:function(a,b){var c=this,f=c.touchID,g=a.originalEvent,h,i;if(d.touch){h=g?g.changedTouches:[],i=h.length;while(i){i--;if(h[i].identifier===f)return b(h[i])}}else{if(!e)return b(a);if(f===g.pointerId)return b(g)}}}),W=j.extend({init:function(b,c){var d=this,e=b[0];d.capture=!1,e.addEventListener(v,k(d._press,d),!0),a.each(x.split(" "),function(){e.addEventListener(this,k(d._release,d),!0)}),j.fn.init.call(d),d.bind(["press","release"],c||{})},_press:function(a){var b=this;b.trigger("press"),b.capture&&a.preventDefault()},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),b.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),X=j.extend({init:function(b){var c=this;j.fn.init.call(c),a.extend(c,b),c.max=0,c._forceEnabled=!1,c.horizontal?(c.measure="width",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="height",c.scrollSize="scrollHeight",c.axis="y")},outOfBounds:function(a){return a>this.max||a<this.min},present:function(){return this._forceEnabled||this.max-this.min},forceEnabled:function(){this._forceEnabled=!0},getSize:function(){return this.container[this.measure]()},getTotal:function(){return this.element[0][this.scrollSize]},update:function(a){var b=this;b.size=b.getSize(),b.total=b.getTotal(),b.min=Math.min(b.max,b.size-b.total),a||b.trigger(z,b)}}),Y=j.extend({init:function(a){var b=this,d=k(b.refresh,b);j.fn.init.call(b),b.x=new X(m({horizontal:!0},a)),b.y=new X(m({horizontal:!1},a)),b.bind(z,a),c.onResize(d)},present:function(){return this.x.present()||this.y.present()},refresh:function(){this.x.update(),this.y.update(),this.trigger(z)}}),Z=j.extend({init:function(a){var b=this;m(b,a),j.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;if(!!c.present()){if(f<c.min&&a<0||f>c.max&&a>0)a*=b.resistance;e.translateAxis(d,a),b.trigger(z,b)}}}),$=h.extend({init:function(a){var b=this,c,d,e;m(b,{elastic:!0},a),e=b.elastic?.5:0,b.x=c=new Z({axis:"x",dimension:b.dimensions.x,resistance:e,movable:b.movable}),b.y=d=new Z({axis:"y",dimension:b.dimensions.y,resistance:e,movable:b.movable}),b.drag.bind(["move","end"],{move:function(a){c.dimension.present()||d.dimension.present()?(c.dragMove(a.x.delta),d.dragMove(a.y.delta),a.preventDefault()):b.drag.skip()},end:function(a){a.preventDefault()}})}}),_=d.transitions.prefix+"Transform",ba=Math.round,bb;d.hasHW3D?bb=function(a,b){return"translate3d("+ba(a)+"px,"+ba(b)+"px,0)"}:bb=function(a,b){return"translate("+ba(a)+"px,"+ba(b)+"px)"};var bc=j.extend({init:function(b){var c=this;j.fn.init.call(c),c.element=a(b),c.x=0,c.y=0,c._saveCoordinates(bb(c.x,c.y))},translateAxis:function(a,b){this[a]+=b,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){m(this,a),this.refresh()},refresh:function(){var a=this,b=bb(a.x,a.y);b!=a.coordinates&&(a.element[0].style[_]=b,a._saveCoordinates(b),a.trigger(z))},_saveCoordinates:function(a){this.coordinates=a}}),bd=i.extend({init:function(a,b){var c=this;i.fn.init.call(c,a,b);var d=c.options.group;d in p?p[d].push(c):p[d]=[c]},events:[E,F,G],options:{name:"DropTarget",group:"default"},_trigger:function(a,b){var c=this,d=o[c.options.group];if(d)return c.trigger(a,m({},b.event,{draggable:d,dropTarget:b.dropTarget}))},_over:function(a){this._trigger(E,a)},_out:function(a){this._trigger(F,a)},_drop:function(a){var b=this,c=o[b.options.group];c&&(c.dropped=!b._trigger(G,a))}}),be=bd.extend({init:function(a,b){var c=this;i.fn.init.call(c,a,b);var d=c.options.group;d in q?q[d].push(c):q[d]=[c]},options:{name:"DropTargetArea",group:"default",filter:null}}),bf=i.extend({init:function(a,b){var d=this;i.fn.init.call(d,a,b),d.drag=new V(d.element,{global:!0,stopPropagation:!0,filter:d.options.filter,threshold:d.options.distance,start:k(d._start,d),move:k(d._drag,d),end:k(d._end,d),cancel:k(d._cancel,d)}),d.destroy=k(d._destroy,d),d.captureEscape=function(a){a.keyCode===c.keys.ESC&&(d._trigger(D,{event:a}),d.drag.cancel())}},events:[A,B,C,D],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,dropped:!1},_start:function(b){var c=this,d=c.options,e=d.container,g=d.hint;c.currentTarget=c.drag.target,c.currentTargetOffset=n(c.currentTarget);if(g){c.hint=a.isFunction(g)?a(g(c.currentTarget)):g;var h=n(c.currentTarget);c.hintOffset=h,c.hint.css({position:"absolute",zIndex:2e4,left:h.left,top:h.top}).appendTo(f.body)}o[d.group]=c,c.dropped=!1,e&&(c.boundaries=Q(e,c.hint)),c._trigger(A,b)&&(c.drag.cancel(),c.destroy()),a(f).on(y,c.captureEscape)},updateHint:function(b){var c=this,d,e=c.options,f=c.boundaries,g=e.axis,h=c.options.cursorOffset;h?d={left:b.x.location+h.left,top:b.y.location+h.top}:(c.hintOffset.left+=b.x.delta,c.hintOffset.top+=b.y.delta,d=a.extend({},c.hintOffset)),f&&(d.top=P(d.top,f.y),d.left=P(d.left,f.x)),g==="x"?delete d.top:g==="y"&&delete d.left,c.hint.css(d)},_drag:function(b){var c=this;b.preventDefault(),c._withDropTarget(b,function(c,d){if(!c)r&&(r._trigger(F,m(b,{dropTarget:a(r.targetElement)})),r=null);else{if(r){if(d===r.targetElement)return;r._trigger(F,m(b,{dropTarget:a(r.targetElement)}))}c._trigger(E,m(b,{dropTarget:a(d)})),r=m(c,{targetElement:d})}}),c._trigger(B,b),c.hint&&c.updateHint(b)},_end:function(b){var c=this;c._withDropTarget(b,function(c,d){c&&(c._drop(m({},b,{dropTarget:a(d)})),r=null)}),c._trigger(C,b),c._cancel(b.event)},_cancel:function(a){var b=this;b.hint&&!b.dropped?b.hint.animate(b.currentTargetOffset,"fast",b.destroy):b.destroy()},_trigger:function(a,b){var c=this;return c.trigger(a,m({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget,dropTarget:b.dropTarget}))},_withDropTarget:function(a,b){var c=this,d,e,f=c.options,g=p[f.group],h=q[f.group];if(g&&g.length||h&&h.length)d=N(a),c.hint&&M(c.hint[0],d)&&(c.hint.hide(),d=N(a),d||(d=N(a)),c.hint.show()),e=T(d,g,h),e?b(e.target,e.targetElement):b()},_destroy:function(){var b=this;b.hint&&b.hint.remove(),delete o[b.options.group],b.trigger("destroy"),a(f).off(y,b.captureEscape)}});c.ui.plugin(bd),c.ui.plugin(be),c.ui.plugin(bf),c.Drag=V,c.Tap=W,c.containerBoundaries=Q,m(c.ui,{Pane:$,PaneDimensions:Y,Movable:bc})})(jQuery);