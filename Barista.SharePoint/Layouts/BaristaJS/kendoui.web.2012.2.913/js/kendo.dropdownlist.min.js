/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function s(a,b,c){var d=0,e=b.length-1,f;for(;d<e;++d)f=b[d],f in a||(a[f]={}),a=a[f];a[b[e]]=c}var c=window.kendo,d=c.ui,e=d.Select,f=c.support.mobileOS,g=".kendoDropDownList",h="disabled",i="change",j="select",k="k-state-focused",l="k-state-default",m="k-state-disabled",n="k-state-selected",o="tabIndex",p="mouseenter"+g+" mouseleave"+g,q=a.proxy,r=e.extend({init:function(d,f){var h=this,i=f&&f.index,k,l,m;h.ns=g,f=a.isArray(f)?{dataSource:f}:f,e.fn.init.call(h,d,f),h._focusHandler=function(){h.wrapper.focus()},f=h.options,d=h.element.on("focus"+g,h._focusHandler),h._reset(),h._word="",h._wrapper(),h._span(),h._popup(),h._mobile(),h._accessors(),h._dataSource(),h._enable(),h._cascade(),h.selectedIndex=-1,i!==b&&(f.index=i),f.autoBind?h.dataSource.fetch():(m=f.text,m||(k=h._optionLabelText(f.optionLabel),l=k&&f.index===0,d.is(j)?l?m=k:m=d.children(":selected").text():!d[0].value&&l&&(m=k)),h.text(m)),c.notify(h)},options:{name:"DropDownList",enable:!0,index:0,autoBind:!0,text:"",template:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",ignoreCase:!0,animation:{}},events:["open","close",i,"select","dataBinding","dataBound"],setOptions:function(a){e.fn.setOptions.call(this,a),this._template(),this._accessors()},destroy:function(){var a=this;a.wrapper.off(g),a.element.off(g),a._inputWrapper.off(g),e.fn.destroy.call(a)},enable:function(a){var b=this,c=b.element,d=b.wrapper.off(g),e=b._inputWrapper.off(p);a===!1?(c.attr(h,h),e.removeClass(l).addClass(m)):(c.removeAttr(h,h),e.addClass(l).removeClass(m).on(p,b._toggleHover),d.on("click"+g,function(a){a.preventDefault(),b.toggle()}).on("keydown"+g,q(b._keydown,b)).on("keypress"+g,q(b._keypress,b)).on("focusin"+g,function(){e.addClass(k),clearTimeout(b._bluring)}).on("focusout"+g,function(){b._blur(),e.removeClass(k),b._bluring=setTimeout(function(){c.blur()})}))},open:function(){var a=this;a.ul[0].firstChild?(a.popup.open(),a._scroll(a._current)):(a._open=!0,a._request||a.dataSource.fetch())},toggle:function(a){this._toggle(a)},refresh:function(){var a=this,b=a._data(),d=b.length,e=a.options.optionLabel;a.trigger("dataBinding"),a._current&&a.current(null),a.ul[0].innerHTML=c.render(a.template,b),a._height(d),a.popup.visible()&&a.popup._position(),a.element.is(j)&&(e&&d&&(e=a._optionLabelText(e),e='<option value="">'+e+"</option>"),a._options(b,e)),a._open&&(a._open=!1,a.toggle(!!d)),a._hideBusy(),a._makeUnselectable(),a._valueCalled||(a._selectItem(),a._valueCalled=!1),a.trigger("dataBound")},search:function(a){if(a){var c=this,d=c.options.ignoreCase;d&&(a=a.toLowerCase()),c._select(function(e){var f=c._text(e);if(f!==b){f=f+"",d&&(f=f.toLowerCase());return f.indexOf(a)===0}})}},select:function(a){var c=this;if(a===b)return c.selectedIndex;c._select(a),c._old=c._accessor(),c._oldIndex=c.selectedIndex},text:function(a){var c=this.span;if(a!==b)c.text(a);else return c.text()},value:function(a){var c=this,d;if(a===b)return c._accessor();a!==null&&(a=a.toString()),c._valueCalled=!0;if(!a||!c._valueOnFetch(a))d=c._index(a),c.select(d>-1?d:0)},_accept:function(a){this._focus(a)},_optionLabelText:function(){var a=this.options,b=a.dataTextField,c=a.optionLabel;if(c&&b&&typeof c=="object")return this._text(c);return c},_data:function(){var a=this,b=a.options,d=b.optionLabel,e=b.dataTextField,f=b.dataValueField,g=a.dataSource.view(),h=g.length,i=d,j=0;if(d&&h){typeof d=="object"?i=d:e&&(i={},e=e.split("."),f=f.split("."),s(i,f,""),s(i,e,d)),i=new c.data.ObservableArray([i]);for(;j<h;j++)i.push(g[j]);g=i}return g},_keydown:function(a){var b=this,d=a.keyCode,e=c.keys,f=b.ul[0];b._move(a),d===e.HOME?(a.preventDefault(),b._select(f.firstChild)):d===e.END&&(a.preventDefault(),b._select(f.lastChild))},_keypress:function(a){var b=this;setTimeout(function(){b._word+=String.fromCharCode(a.keyCode||a.charCode),b._search()})},_popup:function(){e.fn._popup.call(this),this.popup.one("open",function(){this.wrapper=c.wrap(this.element).addClass("km-popup")})},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){a._word=""},a.options.delay),a.search(a._word)},_select:function(a){var c=this,e=c._current,f=c._data(),g,h,i;a=c._get(a),a&&a[0]&&!a.hasClass(n)&&(e&&e.removeClass(n),i=d.List.inArray(a[0],c.ul[0]),i>-1&&(f=f[i],h=c._text(f),g=c._value(f),c.selectedIndex=i,c.text(h),c._accessor(g!==b?g:h,i),c.current(a.addClass(n))))},_mobile:function(){var a=this,b=a.popup,c=b.element.parents(".km-root").eq(0);c.length&&f&&(b.options.animation.open.effects=f.android||f.meego?"fadeIn":f.ios?"slideIn:up":b.options.animation.open.effects)},_span:function(){var b=this,c=b.wrapper,d=".k-input",e;e=c.find(d),e[0]||(c.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(b.element),e=c.find(d)),b.span=e,b._inputWrapper=a(c[0].firstChild),b._arrow=c.find(".k-icon").mousedown(function(a){a.preventDefault()})},_wrapper:function(){var a=this,b=a.element,c=b[0],d=b.attr(o),e;e=b.parent(),e.is("span.k-widget")||(e=b.wrap("<span />").parent()),e.attr(o,d||0),e[0].style.cssText=c.style.cssText,b.hide(),a._focused=a.wrapper=e.attr("unselectable","on").addClass("k-widget k-dropdown k-header").addClass(c.className)}});d.plugin(r)})(jQuery);