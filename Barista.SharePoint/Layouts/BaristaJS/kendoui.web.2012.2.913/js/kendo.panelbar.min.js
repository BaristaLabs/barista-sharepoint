/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function V(a,b){a.find(K).removeClass(F.substr(1)),a.find(L).removeClass(H.substr(1)),b.addClass(F.substr(1)),b.parentsUntil(a,q).filter(":has(.k-header)").addClass(H.substr(1))}function U(b){b=a(b),b.filter(".k-first:not(:first-child)").removeClass(s),b.filter(".k-last:not(:last-child)").removeClass(m),b.filter(":first-child").addClass(s),b.filter(":last-child").addClass(m)}function T(b){b=a(b),b.children(".k-link").children(".k-icon").remove(),b.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var b=a(this),c=b.parent();b.append("<span class='k-icon "+(c.hasClass(C.substr(1))?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function S(b,c){b=a(b).addClass("k-item"),b.children(k).addClass(r),b.children("a").addClass(n).children(k).addClass(r),b.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),b.filter("li[disabled]").addClass("k-state-disabled").removeAttr("disabled"),b.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(C.substr(1)),b.find(">div").addClass(v).css({display:"none"}),b.each(function(){var b=a(this);b.children("."+n).length||b.contents().filter(function(){return!this.nodeName.match(i)&&(this.nodeType!=3||!!a.trim(this.nodeValue))}).wrapAll("<span class='"+n+"'/>")}),c.find(" > li > ."+n).addClass("k-header")}var c=window.kendo,d=c.ui,e=a.extend,f=a.each,g=c.template,h=d.Widget,i=/^(ul|a|div)$/i,j=".kendoPanelBar",k="img",l="href",m="k-last",n="k-link",o="error",p="click",q=".k-item",r="k-image",s="k-first",t="expand",u="select",v="k-content",w="activate",x="collapse",y="contentUrl",z="mouseenter",A="mouseleave",B="contentLoad",C=".k-state-active",D="> .k-panel",E="> .k-content",F=".k-state-selected",G=".k-state-disabled",H=".k-state-highlighted",I=q+":not(.k-state-disabled) > .k-link",J=q+".k-state-disabled > .k-link",K="> li > .k-state-selected, .k-panel > li > .k-state-selected",L="> .k-state-highlighted, .k-panel > .k-state-highlighted",M="k-state-default",N=":visible",O=":empty",P="single",Q={content:g("<div class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:g("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:g("<#= tag(item) # class='#= textClass(item, group) #'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:g("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } #</li>"),image:g("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:g("<span class='#= arrowClass(item) #'></span>"),sprite:g("<span class='k-sprite #= spriteCssClass #'></span>"),empty:g("")},R={wrapperCssClass:function(a,b){var c="k-item",d=b.index;b.enabled===!1?c+=" k-state-disabled":b.expanded===!0?c+=" k-state-active":c+=" k-state-default",d===0&&(c+=" k-first"),d==a.length-1&&(c+=" k-last");return c},textClass:function(a,b){var c=n;b.firstLevel&&(c+=" k-header");return c},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a){var b="k-icon";b+=a.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand";return b},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(a){return"k-group k-panel"},contentAttributes:function(a){return a.item.expanded!==!0?" style='display:none'":""},content:function(a){return a.content?a.content:a.contentUrl?"":"&nbsp;"},contentUrl:function(a){return a.contentUrl?c.attr("content-url")+'="'+a.contentUrl+'"':""}},W=h.extend({init:function(b,d){var e=this,f;h.fn.init.call(e,b,d),b=e.wrapper=e.element,d=e.options,d.dataSource&&(e.element.empty(),e.append(d.dataSource,b)),e._updateClasses(),d.animation===!1&&(d.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),b.on(p+j,I,a.proxy(e._click,e)).on(z+j+" "+A+j,I,e._toggleHover).on(p+j,J,!1),d.contentUrls&&b.find("> .k-item").each(function(b,c){a(c).find("."+n).data(y,d.contentUrls[b])}),f=b.find("li"+C+" > ."+v),f.length>0&&e.expand(f.parent(),!1),c.notify(e)},events:[t,x,u,w,o,B],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200,show:!0},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){h.fn.destroy.call(this),this.element.off(j),c.destroy(this.element)},expand:function(b,c){var d=this,e={};c=c!==!1,b=this.element.find(b),b.each(function(f,g){g=a(g);var h=g.find(D).add(g.find(E));if(!g.hasClass(G)&&h.length>0){if(d.options.expandMode==P&&d._collapseAllExpanded(g))return d;b.find(H).removeClass(H.substr(1)),g.addClass(H.substr(1)),c||(e=d.options.animation,d.options.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),d._triggerEvent(t,g)||d._toggleItem(g,!1,null),c||(d.options.animation=e)}});return d},collapse:function(b,c){var d=this,e={};c=c!==!1,b=d.element.find(b),b.each(function(b,f){f=a(f);var g=f.find(D).add(f.find(E));!f.hasClass(G)&&g.is(N)&&(f.removeClass(H.substr(1)),c||(e=d.options.animation,d.options.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),d._triggerEvent(x,f)||d._toggleItem(f,!0,null),c||(d.options.animation=e))});return d},_toggleDisabled:function(a,b){a=this.element.find(a),a.toggleClass(M,b).toggleClass(G.substr(1),!b)},select:function(b){var c=this;b=c.element.find(b);if(arguments.length===0)return c.element.find(K).parent();b.each(function(b,d){d=a(d);var e=d.children("."+n);if(d.is(G))return c;V(c.element,e)});return c},enable:function(a,b){this._toggleDisabled(a,b!==!1);return this},disable:function(a){this._toggleDisabled(a,!1);return this},append:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.length?c.find(D):null);f(d.items,function(b){d.group.append(this);var c=d.contents[b];c&&a(this).append(c),U(this)}),T(c),U(d.group.find(".k-first, .k-last")),d.group.height("auto");return this},insertBefore:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.parent());f(d.items,function(b){c.before(this);var e=d.contents[b];e&&a(this).append(e),U(this)}),U(c),d.group.height("auto");return this},insertAfter:function(b,c){c=this.element.find(c);var d=this._insert(b,c,c.parent());f(d.items,function(b){c.after(this);var e=d.contents[b];e&&a(this).append(e),U(this)}),U(c),d.group.height("auto");return this},remove:function(a){a=this.element.find(a);var b=this,c=a.parentsUntil(b.element,q),d=a.parent("ul");a.remove(),d&&!d.hasClass("k-panelbar")&&!d.children(q).length&&d.remove(),c.length&&(c=c.eq(0),T(c),U(c));return b},reload:function(b){var c=this;b=c.element.find(b),b.each(function(){var b=a(this);c._ajaxRequest(b,b.children("."+v),!b.is(N))})},_insert:function(b,c,d){var f=this,g,h=[];if(!c||!c.length)d=f.element;var i=a.isPlainObject(b),j={firstLevel:d.hasClass("k-panelbar"),expanded:d.parent().hasClass("k-state-active"),length:d.children().length};c&&!d.length&&(d=a(W.renderGroup({group:j})).appendTo(c)),i||a.isArray(b)?(g=a.map(i?[b]:b,function(b,c){return typeof b=="string"?a(b):a(W.renderItem({group:j,item:e(b,{index:c})}))}),h=a.map(i?[b]:b,function(b,c){return b.content||b.contentUrl?a(W.renderContent({item:e(b,{index:c})})):!1})):(g=a(b),S(g,f.element));return{items:g,group:d,contents:h}},_toggleHover:function(b){var c=a(b.currentTarget);c.parents("li"+G).length||c.toggleClass("k-state-hover",b.type==z)},_updateClasses:function(){var b=this;b.element.addClass("k-widget k-reset k-header k-panelbar");var c=b.element.find("li > ul").not(function(){return a(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").add(b.element),d=c.find("> li:not("+C+") > ul").css({display:"none"}).end().find("> li");d.each(function(){S(this,b.element)}),T(d),U(d)},_click:function(b){var c=this,d=a(b.currentTarget),e=c.element;if(!d.parents("li"+G).length){if(d.closest(".k-widget")[0]!=e[0])return;var f=d.closest("."+n),g=f.closest(q);V(e,f);var h=g.find(D).add(g.find(E)),i=f.attr(l),j=f.data(y)||i&&(i.charAt(i.length-1)=="#"||i.indexOf("#"+c.element[0].id+"-")!=-1);if(h.data("animating"))return;c._triggerEvent(u,g)&&b.preventDefault();if(j||h.length)b.preventDefault();else return;if(c.options.expandMode==P&&c._collapseAllExpanded(g))return;if(h.length){var k=h.is(N);c._triggerEvent(k?x:t,g)||c._toggleItem(g,k,b)}}},_toggleItem:function(a,b,c){var d=this,e=a.find(D);if(e.length)this._toggleGroup(e,b),c&&c.preventDefault();else{var f=a.find("> ."+v);f.length&&(c&&c.preventDefault(),f.is(O)?d._ajaxRequest(a,f,b):d._toggleGroup(f,b))}},_toggleGroup:function(a,b){var c=this,d=c.options.animation,f=d.expand,g=e({},d.collapse),h=g&&"effects"in g;a.is(N)==b&&(a.parent().toggleClass(M,b).toggleClass(C.substr(1),!b).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!b).toggleClass("k-panelbar-collapse",!b).toggleClass("k-i-arrow-s",b).toggleClass("k-panelbar-expand",b),b?f=e(h?g:e({reverse:!0},f),{show:!1,hide:!0}):f=e({complete:function(a){c._triggerEvent(w,a.closest(q))}},f),a.kendoStop(!0,!0).kendoAnimate(f))},_collapseAllExpanded:function(b){var c=this,d,e=!1;if(b.find("> ."+n).hasClass("k-header")){var f=b.find(D).add(b.find(E));f.is(N)&&(e=!0),!f.is(N)&&f.length!==0&&(d=a(c.element).children(),d.find(D).add(d.find(E)).filter(function(){return a(this).is(N)}).each(function(b,d){d=a(d),e=c._triggerEvent(x,d.closest(q)),e||c._toggleGroup(d,!0)}));return e}},_ajaxRequest:function(b,c,d){var e=this,f=b.find(".k-panelbar-collapse, .k-panelbar-expand"),g=b.find("."+n),h=setTimeout(function(){f.addClass("k-loading")},100),i={};a.ajax({type:"GET",cache:!1,url:g.data(y)||g.attr(l),dataType:"html",data:i,error:function(a,b){f.removeClass("k-loading"),e.trigger(o,{xhr:a,status:b})&&this.complete()},complete:function(){clearTimeout(h),f.removeClass("k-loading")},success:function(a,f){c.html(a),e._toggleGroup(c,d),e.trigger(B,{item:b[0],contentElement:c[0]})}})},_triggerEvent:function(a,b){var c=this;return c.trigger(a,{item:b[0]})}});e(W,{renderItem:function(a){a=e({panelBar:{},group:{}},a);var b=Q.empty,c=a.item;return Q.item(e(a,{image:c.imageUrl?Q.image:b,sprite:c.spriteCssClass?Q.sprite:b,itemWrapper:Q.itemWrapper,arrow:c.items||c.content||c.contentUrl?Q.arrow:b,subGroup:W.renderGroup},R))},renderGroup:function(a){return Q.group(e({renderItems:function(a){var b="",c=0,d=a.items,f=d?d.length:0,g=e({length:f},a.group);for(;c<f;c++)b+=W.renderItem(e(a,{group:g,item:e({index:c},d[c])}));return b}},a,R))},renderContent:function(a){return Q.content(e(a,R))}}),c.ui.plugin(W)})(jQuery);