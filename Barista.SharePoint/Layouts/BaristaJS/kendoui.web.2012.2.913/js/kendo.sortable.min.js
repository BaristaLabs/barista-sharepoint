/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){var c=window.kendo,d=a.proxy,e="data-dir",f="asc",g="single",h="data-field",i="desc",j=".kendoSortable",k=".k-link",l=c.ui.Widget,m=l.extend({init:function(a,b){var c=this,e;l.fn.init.call(c,a,b),c._refreshHandler=d(c.refresh,c),c.dataSource=c.options.dataSource.bind("change",c._refreshHandler),e=c.element.find(k),e[0]||(e=c.element.wrapInner('<a class="k-link" href="#"/>').find(k)),c.link=e,c.element.on("click"+j,d(c._click,c))},options:{name:"Sortable",mode:g,allowUnsort:!0},destroy:function(){var a=this;l.fn.destroy.call(a),a.element.off(j),a.dataSource.unbind("change",a._refreshHandler)},refresh:function(){var b=this,c=b.dataSource.sort()||[],d,g,j,k,l=b.element,m=l.attr(h);l.removeAttr(e);for(d=0,g=c.length;d<g;d++)j=c[d],m==j.field&&l.attr(e,j.dir);k=l.attr(e),l.find(".k-i-arrow-n,.k-i-arrow-s").remove(),k===f?a('<span class="k-icon k-i-arrow-n" />').appendTo(b.link):k===i&&a('<span class="k-icon k-i-arrow-s" />').appendTo(b.link)},_click:function(a){var c=this,d=c.element,j=d.attr(h),k=d.attr(e),l=c.options,m=c.dataSource.sort()||[],n,o;k===f?k=i:k===i&&l.allowUnsort?k=b:k=f;if(l.mode===g)m=[{field:j,dir:k}];else if(l.mode==="multiple"){for(n=0,o=m.length;n<o;n++)if(m[n].field===j){m.splice(n,1);break}m.push({field:j,dir:k})}a.preventDefault(),c.dataSource.sort(m)}});c.ui.plugin(m)})(jQuery);