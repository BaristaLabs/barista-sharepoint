/*
* Kendo UI Web v2012.2.913 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
;(function(a,b){function N(a){var b=a.children(".k-item");b.filter(".k-first:not(:first-child)").removeClass(u),b.filter(".k-last:not(:last-child)").removeClass(p),b.filter(":first-child").addClass(u),b.filter(":last-child").addClass(p)}function M(b){b.children(m).addClass(t),b.children("a").addClass(o).children(m).addClass(t),b.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(G),b.filter("li[disabled]").addClass(F).removeAttr("disabled"),b.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(H+" "+J),b.each(function(){var b=a(this);b.children("."+o).length||b.contents().filter(function(){return!this.nodeName.match(k)&&(this.nodeType!=3||!!g(this.nodeValue))}).wrapAll("<a class='"+o+"'/>")})}var c=window.kendo,d=c.ui,e=a.map,f=a.each,g=a.trim,h=a.extend,i=c.template,j=d.Widget,k=/^(a|div)$/i,l=".kendoTabStrip",m="img",n="href",o="k-link",p="k-last",q="click",r="error",s=":empty",t="k-image",u="k-first",v="select",w="activate",x="k-content",y="contentUrl",z="mouseenter",A="mouseleave",B="contentLoad",C=".k-tabstrip-items > .k-item:not(.k-state-disabled)",D=".k-tabstrip-items > .k-item:not(.k-state-disabled):not(.k-state-active)",E=".k-tabstrip-items > .k-state-disabled .k-link",F="k-state-disabled",G="k-state-default",H="k-state-active",I="k-state-hover",J="k-tab-on-top",K={content:i("<div class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),itemWrapper:i("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:i("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) #</li>"),image:i("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:i("<span class='k-sprite #= spriteCssClass #'></span>"),empty:i("")},L={wrapperCssClass:function(a,b){var c="k-item",d=b.index;b.enabled===!1?c+=" k-state-disabled":c+=" k-state-default",d===0&&(c+=" k-first"),d==a.length-1&&(c+=" k-last");return c},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},contentAttributes:function(a){return a.active!==!0?" style='display:none'":""},content:function(a){return a.content?a.content:a.contentUrl?"":"&nbsp;"},contentUrl:function(a){return a.contentUrl?c.attr("content-url")+'="'+a.contentUrl+'"':""}},O=j.extend({init:function(b,d){var e=this;j.fn.init.call(e,b,d),e._animations(e.options),e.element.is("ul")?e.wrapper=e.element.wrapAll("<div />").parent():e.wrapper=e.element,d=e.options,e.wrapper.on(q+l,C,a.proxy(e._click,e)).on(z+l+" "+A+l,D,e._toggleHover).on(q+l,E,!1),e._updateClasses(),e._dataSource(),d.dataSource&&e.dataSource.fetch(),e.options.contentUrls&&e.wrapper.find(".k-tabstrip-items > .k-item").each(function(b,c){a(c).find(">."+o).data(y,e.options.contentUrls[b])});var f=e.wrapper.find("li."+H),g=a(e.contentElement(f.parent().children().index(f)));g.length>0&&g[0].childNodes.length===0&&e.activateTab(f.eq(0)),c.notify(e)},_dataSource:function(){var b=this;b.dataSource&&b._refreshHandler?b.dataSource.unbind("change",b._refreshHandler):b._refreshHandler=a.proxy(b.refresh,b),b.dataSource=c.data.DataSource.create(b.options.dataSource).bind("change",b._refreshHandler)},setDataSource:function(a){this.options.dataSource=a,this._dataSource(),a.fetch()},_animations:function(a){a&&"animation"in a&&!a.animation&&(a.animation={open:{effects:{},show:!0},close:{effects:{}}})},refresh:function(a){var b=this,d=b.options,e=c.getter(d.dataTextField),f=c.getter(d.dataContentField),g=c.getter(d.dataContentUrlField),h=c.getter(d.dataImageUrlField),i=c.getter(d.dataUrlField),j=c.getter(d.dataSpriteCssClass),k,l=[],m,n,o=b.dataSource.view(),p;a=a||{},n=a.action,n&&(o=a.items);for(k=0,p=o.length;k<p;k++)m={text:e(o[k])},d.dataContentField&&(m.content=f(o[k])),d.dataContentUrlField&&(m.contentUrl=g(o[k])),d.dataUrlField&&(m.url=i(o[k])),d.dataImageUrlField&&(m.imageUrl=h(o[k])),d.dataSpriteCssClass&&(m.spriteCssClass=j(o[k])),l[k]=m;if(a.action=="add")a.index<b.tabGroup.children().length?b.insertBefore(l,b.tabGroup.children().eq(a.index)):b.append(l);else if(a.action=="remove")for(k=0;k<o.length;k++)b.remove(a.index);else a.action=="itemchange"?(k=b.dataSource.view().indexOf(o[0]),a.field===d.dataTextField&&b.tabGroup.children().eq(k).find(".k-link").text(o[0].get(a.field))):(b.trigger("dataBinding"),b.remove("li"),b.append(l),b.trigger("dataBound"))},value:function(c){var d=this;if(c!==b)c!=d.value()&&d.tabGroup.children().each(function(){a.trim(a(this).text())==c&&d.select(this)});else return d.select().text()},items:function(){return this.tabGroup[0].children},setOptions:function(a){var b=this.options.animation;this._animations(a),a.animation=h(!0,b,a.animation),j.fn.setOptions.call(this,a)},events:[v,w,r,B,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200,show:!0},close:{duration:200}},collapsible:!1},destroy:function(){var a=this;j.fn.destroy.call(a),a._refreshHandler&&a.dataSource.unbind("change",a._refreshHandler),a.wrapper.off(l),c.destroy(a.wrapper)},select:function(b){var c=this;if(arguments.length===0)return c.wrapper.find("li."+H);isNaN(b)||(b=c.tabGroup.children().get(b)),b=c.element.find(b),a(b).each(function(b,d){d=a(d),!d.hasClass(H)&&!c.trigger(v,{item:d[0],contentElement:c.contentElement(d.index())})&&c.activateTab(d)});return c},enable:function(a,b){this._toggleDisabled(a,b!==!1);return this},disable:function(a){this._toggleDisabled(a,!1);return this},reload:function(b){b=this.tabGroup.find(b);var c=this;b.each(function(){var b=a(this),d=b.find("."+o).data(y),e=a(c.contentElement(b.index()));d&&c.ajaxRequest(b,e,null,d)});return c},append:function(a){var b=this,c=b._create(a);f(c.tabs,function(a){b.tabGroup.append(this),b.wrapper.append(c.contents[a])}),N(b.tabGroup),b._updateContentElements();return b},insertBefore:function(b,c){var d=this,e=d._create(b),g=a(d.contentElement(c.index()));f(e.tabs,function(a){c.before(this),g.before(e.contents[a])}),N(d.tabGroup),d._updateContentElements();return d},insertAfter:function(b,c){var d=this,e=d._create(b),g=a(d.contentElement(c.index()));f(e.tabs,function(a){c.after(this),g.after(e.contents[a])}),N(d.tabGroup),d._updateContentElements();return d},remove:function(b){var c=this,d=typeof b,e=a();d==="string"?b=c.tabGroup.find(b):d==="number"&&(b=c.tabGroup.children().eq(b)),b.each(function(){e.push(c.contentElement(a(this).index()))}),b.remove(),e.remove(),c._updateContentElements();return c},_create:function(b){var c=a.isPlainObject(b),d=this,f,g;c||a.isArray(b)?(b=a.isArray(b)?b:[b],f=e(b,function(b,c){return a(O.renderItem({group:d.tabGroup,item:h(b,{index:c})}))}),g=e(b,function(b,c){if(b.content||b.contentUrl)return a(O.renderContent({item:h(b,{index:c})}))})):(f=a(b),g=a("<div class='"+x+"'/>"),M(f));return{tabs:f,contents:g}},_toggleDisabled:function(b,c){b=this.tabGroup.find(b),b.each(function(){a(this).toggleClass(G,c).toggleClass(F,!c)})},_updateClasses:function(){var c=this,d,e,f;c.wrapper.addClass("k-widget k-header k-tabstrip"),c.tabGroup=c.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),c.tabGroup[0]||(c.tabGroup=a("<ul class='k-tabstrip-items k-reset'/>").appendTo(c.wrapper)),d=c.tabGroup.find("li").addClass("k-item"),d.length&&(e=d.filter("."+H).index(),f=e>=0?e:b,c.tabGroup.contents().filter(function(){return this.nodeType==3&&!g(this.nodeValue)}).remove()),d.eq(e).addClass(J),c.contentElements=c.wrapper.children("div"),c.contentElements.addClass(x).eq(f).addClass(H).css({display:"block"}),d.length&&(M(d),N(c.tabGroup),c._updateContentElements())},_updateContentElements:function(){var b=this,d=b.options.contentUrls||[],e=b.element.attr("id"),f=b.wrapper.children("div");b.tabGroup.find(".k-item").each(function(c){var g=f.eq(c),h=e+"-"+(c+1);!g.length&&d[c]?a("<div id='"+h+"' class='"+x+"'/>").appendTo(b.wrapper):g.attr("id",h)}),b.contentElements=b.contentAnimators=b.wrapper.children("div"),c.support.touch&&c.mobile.ui.Scroller&&(c.touchScroller(b.contentElements),b.contentElements=b.contentElements.children(".km-scroll-container"))},_toggleHover:function(b){a(b.currentTarget).toggleClass(I,b.type==z)},_click:function(b){var c=this,d=a(b.currentTarget),e=d.find("."+o),f=e.attr(n),g=c.options.collapsible,h=a(c.contentElement(d.index()));if(d.closest(".k-widget")[0]==c.wrapper[0]){if(d.is("."+F+(g?"":",."+H))){b.preventDefault();return}if(c.tabGroup.children("[data-animating], [data-in-request]").length)return;if(c.trigger(v,{item:d[0],contentElement:h[0]}))b.preventDefault();else{var i=e.data(y)||f&&(f.charAt(f.length-1)=="#"||f.indexOf("#"+c.element[0].id+"-")!=-1);if(!f||i)b.preventDefault();else return;if(g&&d.is("."+H)){c.deactivateTab(d),b.preventDefault();return}c.activateTab(d)&&b.preventDefault()}}},deactivateTab:function(a){var b=this,d=b.options.animation,e=d.open,f=h({},d.close),g=f&&"effects"in f;a=b.tabGroup.find(a),f=h(g?f:h({reverse:!0},e),{show:!1,hide:!0}),c.size(e.effects)?(a.kendoAddClass(G,{duration:e.duration}),a.kendoRemoveClass(H,{duration:e.duration})):(a.addClass(G),a.removeClass(H)),b.contentAnimators.filter("."+H).kendoStop(!0,!0).kendoAnimate(f).removeClass(H)},activateTab:function(b){b=this.tabGroup.find(b);var d=this,e=d.options.animation,f=e.open,g=h({},e.close),i=g&&"effects"in g,j=b.parent().children(),k=j.filter("."+H),l=j.index(b);g=h(i?g:h({reverse:!0},f),{show:!1,hide:!0}),c.size(f.effects)?(k.kendoRemoveClass(H,{duration:g.duration}),b.kendoRemoveClass(I,{duration:g.duration})):(k.removeClass(H),b.removeClass(I));var m=d.contentAnimators;if(m.length===0){k.removeClass(J),b.addClass(J).css("z-index"),b.addClass(H),d.trigger("change");return!1}var n=m.filter("."+H),p=a(d.contentElement(l));if(p.length===0){n.removeClass(H).kendoStop(!0,!0).kendoAnimate(g);return!1}b.attr("data-animating",!0);var q=(b.children("."+o).data(y)||!1)&&p.is(s),r=function(){k.removeClass(J),b.addClass(J).css("z-index"),c.size(f.effects)?(k.kendoAddClass(G,{duration:f.duration}),b.kendoAddClass(H,{duration:f.duration})):(k.addClass(G),b.addClass(H)),p.closest(".k-content").addClass(H).kendoStop(!0,!0).kendoAnimate(h({init:function(){d.trigger(w,{item:b[0],contentElement:p[0]})}},f,{complete:function(){b.removeAttr("data-animating")}}))},t=function(){q?d.ajaxRequest(b,p,function(){r(),d.trigger("change")}):(r(),d.trigger("change"))};n.removeClass(H),n.length?n.kendoStop(!0,!0).kendoAnimate(h({complete:t},g)):t();return!0},contentElement:function(a){if(isNaN(a-0))return b;var c=this.contentElements&&this.contentElements[0]?this.contentElements:this.contentAnimators,d=new RegExp("-"+(a+1)+"$");if(c)for(var e=0,f=c.length;e<f;e++)if(d.test(c.closest(".k-content")[e].id))return c[e];return b},ajaxRequest:function(b,c,d,e){b=this.tabGroup.find(b);if(!b.find(".k-loading").length){var f=this,g=b.find("."+o),h={},i=null,j=setTimeout(function(){i=a("<span class='k-icon k-loading'/>").prependTo(g)},100);b.attr("data-in-request",!0),a.ajax({type:"GET",cache:!1,url:e||g.data(y)||g.attr(n),dataType:"html",data:h,error:function(a,c){b.removeAttr("data-animating"),f.trigger("error",{xhr:a,status:c})&&this.complete()},complete:function(){b.removeAttr("data-in-request"),clearTimeout(j),i!==null&&i.remove()},success:function(a,e){c.html(a),d&&d.call(f,c),f.trigger(B,{item:b[0],contentElement:c[0]})}})}}});h(O,{renderItem:function(a){a=h({tabStrip:{},group:{}},a);var b=K.empty,c=a.item;return K.item(h(a,{image:c.imageUrl?K.image:b,sprite:c.spriteCssClass?K.sprite:b,itemWrapper:K.itemWrapper},L))},renderContent:function(a){return K.content(h(a,L))}}),c.ui.plugin(O)})(jQuery);